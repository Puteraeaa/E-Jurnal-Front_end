"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[556],{4317:(e,o,t)=>{t.d(o,{A:()=>g});var a=t(7565),r=t(6400),n=t(9132),l=t(1795),s=t(754),d=(t(5963),t(9930)),i=t.n(d),u=t(3579),c=(t(7),t(7929));const b=new(i().Icon)({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41]}),m=e=>{let{setLatLng:o}=e;const[t,l]=(0,a.useState)(null);return(0,r.Po)({click(e){l(e.latlng),o(e.latlng)}}),null===t?null:(0,c.jsx)(n.p,{position:t,icon:b})},p=e=>{let{provider:o,setLatLng:t}=e;const n=(0,r.ko)();return(0,a.useEffect)((()=>{const e=new u.Vn({provider:o,style:"bar",autoClose:!0,retainZoomLevel:!1,searchLabel:"Enter address or place",keepResult:!0});return n.addControl(e),n.on("geosearch/showlocation",(function(e){const{x:o,y:a}=e.location;t({lat:a,lng:o})})),()=>n.removeControl(e)}),[n,o,t]),null},g=e=>{let{setLatLng:o}=e;const t=new u.F6;return(0,c.jsxs)(l.W,{center:[-2.5,118],zoom:5,style:{height:"300px",width:"100%"},children:[(0,c.jsx)(s.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"\xa9 OpenStreetMap contributors"}),(0,c.jsx)(p,{provider:t,setLatLng:o}),(0,c.jsx)(m,{setLatLng:o})]})}},3683:(e,o,t)=>{t.r(o),t.d(o,{default:()=>c});var a=t(7565),r=t(1030),n=t(4317),l=t(6709),s=t(896),d=t(1918),i=t(7929);const u=s.A.get("token"),c=()=>{const e=(0,r.Zp)(),{id:o}=(0,r.g)(),[t,s]=(0,a.useState)({username:"",name:"",bidang:"",alamat:"",longitude:"",latitude:"",industryMentorName:"",industryMentorNo:"",roles:""});(0,a.useEffect)((()=>{(async()=>{try{const e=await l.A.get(`admin/users/${o}`,{headers:{Authorization:`Bearer ${u}`}});if(e.data&&e.data.data){const{name:o,roles:t,industries:a}=e.data.data;s({username:o||"",name:(null===a||void 0===a?void 0:a.name)||"",bidang:(null===a||void 0===a?void 0:a.bidang)||"",alamat:(null===a||void 0===a?void 0:a.alamat)||"",longitude:(null===a||void 0===a?void 0:a.longitude)||"",latitude:(null===a||void 0===a?void 0:a.latitude)||"",industryMentorName:(null===a||void 0===a?void 0:a.industryMentorName)||"",industryMentorNo:(null===a||void 0===a?void 0:a.industryMentorNo)||"",roles:t.join(", ")||""})}else console.error("Unexpected response structure:",e.data),d.oR.error("Failed to load lead data. Data format is incorrect.",{position:"top-right",duration:4e3})}catch(e){console.error("Error fetching lead data:",e),d.oR.error("Failed to load lead data.",{position:"top-right",duration:4e3})}})()}),[o]);const c=e=>{const{name:o,value:t}=e.target;s((e=>({...e,[o]:t})))},{username:b,name:m,bidang:p,alamat:g,longitude:x,latitude:h,industryMentorName:y,industryMentorNo:f,roles:v}=t;return(0,i.jsx)("div",{className:"container mx-auto my-10 px-4",children:(0,i.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Edit Data Industri"}),(0,i.jsx)("p",{className:"text-center border-b pb-4 mb-4",children:"Silakan edit form di bawah!"}),(0,i.jsxs)("form",{onSubmit:async a=>{a.preventDefault();try{await l.A.put(`admin/users/${o}`,{...t,roles:t.roles.split(", ").map((e=>e.trim()))},{headers:{Authorization:`Bearer ${u}`}}),d.oR.success("Lead updated successfully!",{position:"top-right",duration:4e3}),e("/app/data/industri")}catch(r){if(r.response){console.error("Error response data:",r.response.data);const e=r.response.data.errors;if(e){const o=Object.values(e)[0][0];d.oR.error(`Failed to update lead: ${o}`,{position:"top-right",duration:4e3})}else d.oR.error(`Failed to update lead: ${r.response.data.message||"Please check the form fields."}`,{position:"top-right",duration:4e3})}else console.error("Error updating lead:",r),d.oR.error("Failed to update lead.",{position:"top-right",duration:4e3})}},children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Username"}),(0,i.jsx)("input",{type:"text",name:"username",value:b,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Nama Industri"}),(0,i.jsx)("input",{type:"text",name:"name",value:m,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Bidang"}),(0,i.jsx)("input",{type:"text",name:"bidang",value:p,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Alamat"}),(0,i.jsx)("input",{type:"text",name:"alamat",value:g,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Longitude"}),(0,i.jsx)("input",{type:"text",name:"longitude",value:x,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,readOnly:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Latitude"}),(0,i.jsx)("input",{type:"text",name:"latitude",value:h,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,readOnly:!0})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)(n.A,{setLatLng:e=>{let{lat:o,lng:t}=e;s((e=>({...e,latitude:o,longitude:t})))}})}),(0,i.jsx)("button",{type:"button",className:"w-full px-4 py-2 text-white bg-green-500 hover:bg-green-700 rounded-lg mb-4",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:o,longitude:t}=e.coords;s((e=>({...e,latitude:o.toFixed(6),longitude:t.toFixed(6)}))),d.oR.success("Location updated successfully!",{position:"top-right",duration:4e3})}),(e=>{console.error("Error fetching location:",e),d.oR.error("Failed to fetch location. Please enable location services.",{position:"top-right",duration:4e3})})):d.oR.error("Geolocation is not supported by this browser.",{position:"top-right",duration:4e3})},children:"Tambah lokasi dengan posisi anda saat ini"}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pembimbing"}),(0,i.jsx)("input",{type:"text",name:"industryMentorName",value:y,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"No. Pembimbing"}),(0,i.jsx)("input",{type:"text",name:"industryMentorNo",value:f,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",hidden:!0,children:[(0,i.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Roles"}),(0,i.jsx)("input",{type:"text",name:"roles",value:v,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,i.jsx)("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-blue-500 hover:bg-blue-700 rounded-lg",children:"Save"}),(0,i.jsx)("button",{type:"button",className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg",onClick:()=>e("/app/data/users"),children:"Cancel"})]})]})]})})}}}]);
//# sourceMappingURL=556.869f90a7.chunk.js.map