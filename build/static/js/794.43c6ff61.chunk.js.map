{"version":3,"file":"static/js/794.43c6ff61.chunk.js","mappings":"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","sources":["features/Laporan/Edit-Laporan.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport Api from \"../../api\";\nimport Cookies from \"js-cookie\";\nimport swal from \"sweetalert2\";\nimport toast from \"react-hot-toast\";\n\nexport default function EditUser() {\n  const { id } = useParams(); // Get the report ID from URL parameters\n  const navigate = useNavigate();\n  const [deskripsi, setDeskripsi] = useState(\"\");\n  const [tanggal, setTanggal] = useState(\"\"); // Initialize date state\n  const [judul, setJudul] = useState(\"\");\n  const [startTime, setStartTime] = useState(\"\");\n  const [endTime, setEndTime] = useState(\"\");\n  const [tools, setTools] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [errors, setErrors] = useState({});\n  const token = Cookies.get(\"token\");\n\n  useEffect(() => {\n    // Set the default date to today's date\n    const today = new Date().toISOString().split(\"T\")[0];\n    setTanggal(today);\n\n    const fetchReport = async () => {\n      try {\n        const response = await Api.get(`admin/jurnal/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const report = response.data.data;\n        setJudul(report.judul || \"\");\n        setDeskripsi(report.description || \"\");\n        setTanggal(report.date || today); // Use today if date is not available\n        setStartTime(report.start_time || \"\");\n        setEndTime(report.end_time || \"\");\n        setTools(report.tools || \"\");\n      } catch (error) {}\n    };\n\n    fetchReport();\n  }, [id, token]);\n\n  const updateUser = async (e) => {\n    e.preventDefault();\n\n    // Validasi minimal 150 karakter untuk deskripsi\n    const newErrors = {};\n    if (deskripsi.length < 150)\n      newErrors.deskripsi = [\n        \"Deskripsi harus terdiri dari minimal 150 karakter\"\n      ];\n    if (!tanggal) newErrors.tanggal = [\"Tanggal Wajib diisi\"];\n    if (!startTime) newErrors.start_time = [\"Start Time Wajib diisi\"];\n    if (!endTime) newErrors.end_time = [\"End Time Wajib diisi\"];\n    if (!tools) newErrors.tools = [\"Tools Wajib diisi\"];\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      return;\n    }\n\n    try {\n      const result = await swal.fire({\n        title: \"Memperbarui Program\",\n        text: \"Apakah Anda yakin ingin Memperbarui Program?\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Ya, Perbarui!\"\n      });\n\n      if (result.isConfirmed) {\n        const formData = new FormData();\n        formData.append(\"description\", deskripsi);\n        formData.append(\"start_time\", startTime);\n        formData.append(\"end_time\", endTime);\n        formData.append(\"tools\", tools);\n        formData.append(\"date\", tanggal);\n        if (image) formData.append(\"image\", image);\n\n        for (let [key, value] of formData.entries()) {\n        }\n\n        await Api.patch(`admin/jurnal/${id}`, formData, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n\n        toast.success(\"Program updated successfully!\", {\n          position: \"top-right\",\n          duration: 4000\n        });\n\n        navigate(`/app/detail-laporan/${id}`);\n      }\n    } catch (error) {\n      toast.error(\"Failed to update program. Please try again later.\", {\n        position: \"top-right\",\n        duration: 4000\n      });\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto my-10\">\n      <div className=\"flex flex-col\">\n        <div className=\"dark:bg-gray-800 bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500\">\n          <h1 className=\"text-3xl font-bold text-center mb-4\">\n            Edit Laporan Kegiatan PKL\n          </h1>\n          <p className=\"text-center border-b pb-4 mb-4\">\n            Silakan perbarui form di bawah!\n          </p>\n\n          <form onSubmit={updateUser}>\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\">\n                Deskripsi Laporan\n              </label>\n              <ReactQuill\n                value={deskripsi}\n                onChange={setDeskripsi}\n                className=\"bg-white border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                theme=\"snow\"\n                placeholder=\"Describe your activity...\"\n              />\n              {errors.deskripsi && (\n                <div className=\"text-red-600 mt-2\">{errors.deskripsi[0]}</div>\n              )}\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\">\n                Image (optional)\n              </label>\n              <input\n                type=\"file\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                onChange={(e) => setImage(e.target.files[0])}\n              />\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\">\n                Tools Used\n              </label>\n              <input\n                type=\"text\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                value={tools}\n                onChange={(e) => setTools(e.target.value)}\n                placeholder=\"Enter tools used\"\n              />\n              {errors.tools && (\n                <div className=\"text-red-600 mt-2\">{errors.tools[0]}</div>\n              )}\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\">\n                Tanggal Laporan\n              </label>\n              <input\n                type=\"date\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                value={tanggal}\n                onChange={(e) => setTanggal(e.target.value)}\n              />\n              {errors.tanggal && (\n                <div className=\"text-red-600 mt-2\">{errors.tanggal[0]}</div>\n              )}\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\">\n                Start Time\n              </label>\n              <input\n                type=\"time\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                value={startTime}\n                onChange={(e) => setStartTime(e.target.value)}\n              />\n              {errors.start_time && (\n                <div className=\"text-red-600 mt-2\">{errors.start_time[0]}</div>\n              )}\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\">\n                End Time\n              </label>\n              <input\n                type=\"time\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                value={endTime}\n                onChange={(e) => setEndTime(e.target.value)}\n              />\n              {errors.end_time && (\n                <div className=\"text-red-600 mt-2\">{errors.end_time[0]}</div>\n              )}\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                className=\"w-full px-4 py-2 text-white bg-blue-500 hover:bg-blue-700 rounded-lg\"\n              >\n                <i className=\"fa fa-save mr-2\"></i> Save\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n"],"names":["EditUser","id","useParams","navigate","useNavigate","deskripsi","setDeskripsi","useState","tanggal","setTanggal","judul","setJudul","startTime","setStartTime","endTime","setEndTime","tools","setTools","image","setImage","errors","setErrors","token","Cookies","get","useEffect","today","Date","toISOString","split","async","report","Api","headers","Authorization","data","description","date","start_time","end_time","error","fetchReport","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","newErrors","length","Object","keys","swal","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","formData","FormData","append","key","value","entries","patch","toast","success","position","duration","ReactQuill","onChange","theme","placeholder","type","target","files"],"sourceRoot":""}