"use strict";(self.webpackChunkE_Jurnal=self.webpackChunkE_Jurnal||[]).push([[625],{5625:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var a=r(2791),n=r(9434),s=r(5054),o=r(4165),l=r(5861),c=r(9439),d=r(8057),i=r(8329),p=r(2564),x=(r(5462),r(5224)),m=r(9961),u=r(7626),h=r(6042),b=r(29),f=r(9359),j=r(8559),y=(0,b.SO)((function(e,t){var r=new j.Popup(e,t.overlayContainer);return(0,f.O)(r,t)}),(function(e,t,r,n){var s=r.position;(0,a.useEffect)((function(){var r=e.instance;function a(e){e.popup===r&&(r.update(),n(!0))}function o(e){e.popup===r&&n(!1)}return t.map.on({popupopen:a,popupclose:o}),null==t.overlayContainer?(null!=s&&r.setLatLng(s),r.openOn(t.map)):t.overlayContainer.bindPopup(r),function(){var e;t.map.off({popupopen:a,popupclose:o}),null===(e=t.overlayContainer)||void 0===e||e.unbindPopup(),t.map.removeLayer(r)}}),[e,t,n,s])})),g=(r(3666),r(184)),N=function(){var e=(0,a.useState)([]),t=(0,c.Z)(e,2),r=t[0],n=t[1],s=(0,a.useState)(null),b=(0,c.Z)(s,2),f=b[0],j=b[1],N=i.Z.get("token"),v=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("/admin/absence",{headers:{Authorization:"Bearer ".concat(N)}});case 3:t=e.sent,console.log("Response data:",t.data),n(t.data.data.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching attendance records:",e.t0.message),p.Am.error("Failed to fetch attendance records");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){v()}),[]),(0,g.jsxs)("div",{className:"container mx-auto mt-5 px-4 md:mt-10 md:px-8 mb-[400px]",children:[(0,g.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center md:text-3xl",children:"Rekap Absensi"}),(0,g.jsxs)("div",{className:"overflow-x-auto w-full",children:[(0,g.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 dark:text-white dark:bg-[#1c2229]",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"bg-gray-200 text-gray-700",children:[(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"No"}),(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Nama"}),(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Kelas"}),(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Status"}),(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Waktu Masuk"}),(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Waktu Keluar"}),(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Photo"}),(0,x.Z)(["siswa.delete"])&&(0,g.jsx)("th",{className:"py-2 px-4 border-b",children:"Action"})]})}),(0,g.jsx)("tbody",{children:r.length>0?r.map((function(e,t){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:t+1}),(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e.users?e.users.name:"-"}),(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e.users?e.claa:"-"}),(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e.absenceReason}),(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e.arrivalTime}),(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e.departureTime}),(0,g.jsx)("td",{className:"py-2 px-4 border-b text-center",children:(0,g.jsx)("img",{src:e.image,alt:"Attendance",className:"w-12 h-12 object-cover mx-auto cursor-pointer rounded-full md:w-20 md:h-20",onClick:function(){return document.getElementById("my_modal_3").showModal()}})}),(0,g.jsxs)("td",{className:"py-2 px-4 border-b text-center ",children:[(0,g.jsx)("button",{className:"btn btn-primary btn-sm pl-2",onClick:function(){j(e),document.getElementById("my_modal_maps").showModal()},children:"Lihat Posisi"}),(0,x.Z)(["siswa.delete"])&&(0,g.jsx)("button",{className:"btn btn-primary btn-sm ml-2",children:"Verifikasi"})]})]},t)})):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"8",className:"py-2 px-4 text-center",children:"No records found"})})})]}),(0,g.jsx)("dialog",{id:"my_modal_3",className:"modal",children:(0,g.jsxs)("div",{className:"modal-box",children:[(0,g.jsx)("form",{method:"dialog",children:(0,g.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"\u2715"})}),(0,g.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Expend Photo"}),(0,g.jsx)("img",{src:"https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",alt:"Expanded Attendance",className:"rounded-lg"})]})}),(0,g.jsx)("dialog",{id:"my_modal_maps",className:"modal",children:(0,g.jsxs)("div",{className:"modal-box",children:[(0,g.jsx)("form",{method:"dialog",children:(0,g.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"\u2715"})}),(0,g.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Lokasi Absen"}),f&&f.latitude&&f.longitude?(0,g.jsxs)(m.h,{center:[f.latitude,f.longitude],zoom:13,style:{height:"400px",width:"100%"},children:[(0,g.jsx)(u.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(0,g.jsx)(h.J,{position:[f.latitude,f.longitude],children:(0,g.jsx)(y,{children:"Lokasi Absen"})})]}):(0,g.jsx)("p",{children:"Lokasi tidak tersedia"})]})})]}),(0,g.jsx)(p.Ix,{})]})};var v=function(){var e=(0,n.I0)();return(0,a.useEffect)((function(){e((0,s.Iw)({title:"Rekap Absen"}))}),[]),(0,g.jsx)(N,{})}}}]);
//# sourceMappingURL=625.9d99a450.chunk.js.map