"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[939],{4939:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var r=s(7565),o=s(3292),l=s(4963),n=s(1030),t=s(6709),d=s(896),i=s(1918),u=s(7929);const c=d.A.get("token"),b=JSON.parse(d.A.get("user")),p=()=>{const e=(0,n.Zp)(),[a,s]=(0,r.useState)(null),{id:o}=(0,n.g)(),[l,d]=(0,r.useState)({user_id:"",name:"",username:"",password:"",password_confirmation:"",nis:"",placeOfBirth:"",dateOfBirth:"",gender:"",bloodType:"",alamat:"",image:null,classes_id:"",industri_id:"",departemen_id:"",parents_id:"",teacher_id:"",roles:"siswa"});(0,r.useEffect)((()=>{(async()=>{const e=b.id;try{const a=await t.A.get(`admin/users/${e}`,{headers:{Authorization:`Bearer ${c}`}}),r=a.data.data.student;s(r.user_id),d({user_id:r.user_id||"",username:a.data.data.name||"",password:"",password_confirmation:"",name:r.name,nis:r.nis||"",placeOfBirth:r.placeOfBirth||"",dateOfBirth:r.dateOfBirth||"",gender:r.gender||"",bloodType:r.bloodType||"",alamat:r.alamat||"",image:null,classes_id:r.classes_id||"",industri_id:r.industri_id||"",departemen_id:r.departemen_id||"",parents_id:r.parents_id||"",teacher_id:r.teacher_id||"",roles:"siswa"})}catch(a){console.error("Error fetching student data:",a),i.oR.error("Failed to load student data.",{position:"top-right",duration:4e3})}})()}),[o]);const p=e=>{const{name:a,value:s,type:r,files:o}=e.target;d((e=>({...e,[a]:"file"===r?o[0]:s})))};return(0,u.jsx)("div",{className:"container mx-auto my-10 px-4",children:(0,u.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Edit Data Siswa"}),(0,u.jsx)("p",{className:"text-center border-b pb-4 mb-4",children:"Silakan update form di bawah!"}),(0,u.jsxs)("form",{onSubmit:async s=>{b.id;if(s.preventDefault(),!l.password||l.password_confirmation)try{await t.A.put(`admin/users/${a}`,l,{headers:{Authorization:`Bearer ${c}`}}),i.oR.success("Lead updated successfully!",{position:"top-right",duration:4e3}),e("/app/settings-profile")}catch(r){if(r.response){const e=r.response.data.errors;if(e){for(const[a,s]of Object.entries(e));i.oR.error(`Failed to update lead: ${Object.values(e)[0][0]}`,{position:"top-right",duration:4e3}),console.error("Error response data:",r.response.data)}else i.oR.error(`Failed to update lead: ${r.response.data.message||"Please check the form fields."}`,{position:"top-right",duration:4e3})}else i.oR.error("Failed to update lead.",{position:"top-right",duration:4e3})}else i.oR.error("Konfirmasi password wajib diisi jika Anda mengisi password.",{position:"top-right",duration:4e3})},children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Username Siswa"}),(0,u.jsx)("input",{type:"text",name:"username",value:l.username,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Password Siswa "}),(0,u.jsx)("input",{type:"password",name:"password",value:l.password,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Konfirmasi Password"}),(0,u.jsx)("input",{type:"password",name:"password_confirmation",value:l.password_confirmation,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!!l.password})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Nama Siswa"}),(0,u.jsx)("input",{type:"text",name:"name",value:l.name,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"NIS"}),(0,u.jsx)("input",{type:"text",name:"nis",value:l.nis,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tempat Lahir"}),(0,u.jsx)("input",{type:"text",name:"placeOfBirth",value:l.placeOfBirth,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tanggal Lahir"}),(0,u.jsx)("input",{type:"date",name:"dateOfBirth",value:l.dateOfBirth,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Jenis Kelamin"}),(0,u.jsxs)("select",{name:"gender",value:l.gender,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Pilih Jenis Kelamin"}),(0,u.jsx)("option",{value:"male",children:"Laki-Laki"}),(0,u.jsx)("option",{value:"female",children:"Perempuan"})]})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Golongan Darah"}),(0,u.jsxs)("select",{name:"bloodType",value:l.bloodType,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Pilih Golongan Darah"}),(0,u.jsx)("option",{value:"A",children:"A"}),(0,u.jsx)("option",{value:"B",children:"B"}),(0,u.jsx)("option",{value:"AB",children:"AB"}),(0,u.jsx)("option",{value:"O",children:"O"})]})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Alamat"}),(0,u.jsx)("textarea",{name:"alamat",value:l.alamat,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,u.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:bg-blue-600",children:"Update"})]})]})})};const m=function(){const e=(0,o.wA)();return(0,r.useEffect)((()=>{e((0,l.wE)({title:"Settings"}))}),[]),(0,u.jsx)(p,{})}}}]);
//# sourceMappingURL=939.5da5a2a8.chunk.js.map