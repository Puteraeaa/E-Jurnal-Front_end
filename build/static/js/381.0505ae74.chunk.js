"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[381],{4179:(e,a,s)=>{s.d(a,{A:()=>n});var t=s(7929);const r=function(e){let{styleClass:a,children:s}=e;return(0,t.jsx)("div",{className:`text-xl font-semibold ${a}`,children:s})};const n=function(e){let{title:a,children:s,topMargin:n,TopSideButtons:d}=e;return(0,t.jsxs)("div",{className:"card w-full p-6 bg-base-100 shadow-xl "+(n||"mt-6"),children:[(0,t.jsxs)(r,{styleClass:d?"inline-block":"",children:[a,d&&(0,t.jsx)("div",{className:"inline-block float-right",children:d})]}),(0,t.jsx)("div",{className:"divider mt-2"}),(0,t.jsx)("div",{className:"h-full w-full pb-6 bg-base-100",children:s})]})}},4296:(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var t=s(7565),r=s(3292),n=s(4963),d=s(477),l=s(4179),i=s(645),o=s(6142),c=s(4424),m=s(19),x=s(2400),u=s(7929);const h=e=>{let{lead:a,show:s,onClose:t}=e;const n=(0,r.wA)(),d=()=>{n((0,i.Oo)()),t()};return(0,u.jsx)("div",{className:"modal modal-open overflow-y-auto",children:(0,u.jsxs)("div",{className:"modal-box w-full max-w-5xl h-auto p-8 relative bg-white dark:bg-gray-800 shadow-2xl rounded-xl transition-all ease-in-out duration-300 transform",children:[(0,u.jsx)("div",{className:"absolute top-4 right-4 z-50",children:(0,u.jsx)("button",{className:"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-400",onClick:d,children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("img",{src:a.image,alt:"Profile",className:"w-36 h-36 mx-auto rounded-full border-4 border-blue-500 shadow-lg"}),(0,u.jsx)("h3",{className:"text-3xl font-bold mt-4 dark:text-white",children:a.name}),(0,u.jsx)("h5",{className:"text-gray-500 dark:text-gray-400 mt-2",children:a.email})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 shadow-lg rounded-lg mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold mb-4 dark:text-white border-b pb-2",children:"Data Siswa"}),(0,u.jsx)("table",{className:"w-full",children:(0,u.jsxs)("tbody",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Nama"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.name})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"NIS"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.nis})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Kelas"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.classes?a.classes.name:"No Classroom"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Tempat Lahir"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.dateOfBirth})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Tanggal Lahir"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.placeOfBirth})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Gender"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.gender})]})]})})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 shadow-lg rounded-lg mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold mb-4 dark:text-white border-b pb-2",children:"Data Orang Tua"}),(0,u.jsx)("table",{className:"w-full",children:(0,u.jsxs)("tbody",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Nama Orang Tua"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.parents?a.parents.nama:"No Industry"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Jenis Kelamin "}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.parents?a.parents.gender:"No Industry"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Alamar Orang Tua"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.parents?a.parents.alamat:"No Address"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Pekerjaan Orang Tua"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.parents?a.parents.occupation:"No Mentor"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"No Telepon Orang Tua"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.parents?a.parents.phoneNumber:"No Phone"})]})]})})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 shadow-lg rounded-lg mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold mb-4 dark:text-white border-b pb-2",children:"Data Tempat PKL"}),(0,u.jsx)("table",{className:"w-full",children:(0,u.jsxs)("tbody",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Nama Tempat PKL"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.industries?a.industries.name:"No Industry"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Bidang"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.industries?a.industries.bidang:"No Industry"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Alamat Tempat PKL"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.industries?a.industries.alamat:"No Address"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Nama Pembimbing"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.industries?a.industries.industryMentorName:"No Mentor"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"No Telepon Pembimbing"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.industries?a.industries.industryMentorNo:"No Phone"})]})]})})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 shadow-lg rounded-lg mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold mb-4 dark:text-white border-b pb-2",children:"Data Guru Pembimbing"}),(0,u.jsx)("table",{className:"w-full",children:(0,u.jsxs)("tbody",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"Nama"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.teachers?a.teachers.name:"No Teacher"})]}),(0,u.jsxs)("tr",{className:"border-b dark:border-gray-600",children:[(0,u.jsx)("td",{className:"py-3 px-4 font-medium",children:"No. Telepon"}),(0,u.jsx)("td",{className:"py-3 px-4",children:a.teachers?a.teachers.no_hp:"No Phone"})]})]})})]}),(0,u.jsx)("div",{className:"modal-action flex justify-center mt-8",children:(0,u.jsx)("button",{className:"btn btn-xl    bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto px-10 py-2 rounded-lg shadow-lg transition duration-300",onClick:d,children:"Close"})})]})})};var b=s(6709),p=s(896),j=s(7850),g=(s(6804),s(1774)),N=s.n(g);const y=s.p+"static/media/Template import-siswa.f4ce361a042852ed8223.xlsx";var w=s(8758);function f(){return(0,u.jsxs)("tr",{className:"animate-pulse",children:[(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"})}),(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mx-auto"})}),(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"})}),(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mx-auto"})}),(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"h-8 bg-gray-200 rounded w-full mx-auto"})})]})}const k=()=>{const{leads:e,loading:a,error:s}=(0,r.d4)((e=>e.lead)),n=(0,r.wA)(),[i,g]=(0,t.useState)(""),[k,v]=(0,t.useState)(1),[C,A]=(0,t.useState)(null),[L,B]=(0,t.useState)(!1),[T,E]=(0,t.useState)(!1),[S,P]=(0,t.useState)(null),_=JSON.parse(p.A.get("user")).roles,[O,M]=(0,t.useState)([]),[R,D]=(0,t.useState)({currentPage:1,perPage:8,total:0}),I=p.A.get("token"),$=async function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;let a="";a="orang tua"===_||"guru"===_||"industri"===_?"admin/Studentbyrole":"admin/student";try{const s=await b.A.get(`${a}?page=${e}`,{headers:{Authorization:`Bearer ${I}`}});M(s.data.data.data),D({currentPage:s.data.data.current_page,perPage:s.data.data.per_page,total:s.data.data.total})}catch(s){console.error("Error fetching data:",s)}};(0,t.useEffect)((()=>{$(k)}),[k]),(0,t.useEffect)((()=>{n((0,o.TW)())}),[n]);const K=O.filter((e=>{var a,s;return(null===(a=e.classes)||void 0===a?void 0:a.name.toLowerCase().includes(i.toLowerCase()))||(null===(s=e.industries)||void 0===s?void 0:s.name.toLowerCase().includes(i.toLowerCase()))||e.name.toLowerCase().includes(i.toLowerCase())})),F=e=>e.industries?"badge badge-secondary badge-xs p-2 bg-green-500 border-green-500 w-20":"badge badge-secondary bg-red-500 w-20",z=Math.ceil(R.total/5);return a?(0,u.jsx)("div",{children:"Loading..."}):s?(0,u.jsxs)("div",{children:["Error: ",s]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(l.A,{title:"Data Siswa",topMargin:"mt-2",TopSideButtons:(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between items-center gap-2",children:[(0,u.jsx)("input",{type:"text",className:"input input-bordered input-sm w-full sm:w-64",placeholder:"Search",value:i,onChange:e=>{g(e.target.value)}}),(0,w.A)(["siswa.delete"])&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.N_,{to:"/app/data/siswa/tambah",children:(0,u.jsx)("button",{className:"btn btn-sm normal-case btn-primary w-full sm:w-auto",children:"Add New"})}),(0,u.jsx)("button",{className:"btn btn-sm normal-case btn-primary w-full sm:w-auto",onClick:async()=>{try{const{isConfirmed:e}=await N().fire({title:"Yakin?",text:"Apakah Anda yakin ingin mengunduh data ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Unduh!",cancelButtonText:"Batal"});if(e){const e=await b.A.get("/admin/export-users/siswa",{headers:{Authorization:`Bearer ${I}`},responseType:"blob"}),a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download","siswa_data.xlsx"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}}catch(s){console.error("Error downloading data:",s),j.oR.error("Failed to download data.",{position:"top-right",duration:4e3})}},children:"Download All Data"}),(0,u.jsx)("button",{className:"btn btn-sm normal-case btn-primary w-full sm:w-auto",onClick:()=>document.getElementById("my_modal_5").showModal(),children:"Import Excel"})]})]}),children:[(0,u.jsx)("div",{className:"overflow-x-auto w-full",children:(0,u.jsxs)("table",{className:"table w-full text-center",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Nama"}),(0,u.jsx)("th",{children:"Kelas"}),(0,u.jsx)("th",{children:"Status PKL"}),(0,u.jsx)("th",{children:"Tempat PKL"}),(0,u.jsx)("th",{})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-200",children:a?(0,u.jsx)(f,{}):K.map((e=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.name}),(0,u.jsx)("td",{children:e.classes?e.classes.name:"-"}),(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:F(e),children:[" ",e.industries?"Berlangsung":"Belum"," "]})}),(0,u.jsx)("td",{children:e.industries?e.industries.name:"-"}),(0,u.jsxs)("td",{children:[(0,u.jsx)("div",{className:"flex justify-center"}),(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,w.A)(["siswa.delete"])&&(0,u.jsx)(d.N_,{to:`/app/data/siswa/edit/${e.user_id}`,children:(0,u.jsx)("button",{className:"btn btn-sm btn-square btn-primary",children:(0,u.jsx)(m.A,{className:"h-4 w-4"})})}),(0,u.jsx)("button",{className:"btn btn-sm btn-square btn-warning",onClick:()=>(e=>{A(e),B(!0)})(e),children:(0,u.jsx)(x.A,{className:"h-4 w-4"})}),(0,w.A)(["siswa.delete"])&&(0,u.jsx)("button",{className:"btn btn-sm btn-square btn-error",onClick:()=>(async e=>{try{const{isConfirmed:a}=await N().fire({title:"Yakin?",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Hapus!"});if(a){const a=await b.A.delete(`admin/users/${e}`,{headers:{Authorization:`Bearer ${I}`}});j.oR.success(a.data.message,{position:"top-right",duration:4e3}),$(k)}}catch(s){console.error("Error deleting lead:",s),j.oR.error("Failed to delete lead.",{position:"top-right",duration:4e3})}})(e.user_id),children:(0,u.jsx)(c.A,{className:"h-4 w-4"})})]})]})]},e.id)))})]})}),(0,u.jsx)("div",{className:"flex justify-center mt-4",children:(()=>{let e=[];for(let a=1;a<=z;a++)e.push((0,u.jsx)("button",{className:"btn mx-1 btn-sm "+(a===k?"btn-active":""),onClick:()=>{v(a)},children:a},a));return e})()})]}),(0,u.jsx)(j.N9,{}),L&&(0,u.jsx)(h,{lead:C,onClose:()=>B(!1)}),(0,u.jsx)("dialog",{id:"my_modal_5",className:"modal",children:(0,u.jsxs)("form",{method:"dialog",className:"modal-box",children:[(0,u.jsx)("h3",{className:"font-bold text-lg",children:"Upload Excel Siswa"}),(0,u.jsx)("p",{className:"py-4",children:"Silahkan upload file Excel siswa pada field di bawah ini."}),(0,u.jsx)("button",{className:"btn bg-red-500 text-white w-[150px] text-xs mb-3",type:"button",onClick:()=>{const e=document.createElement("a");e.href=y,e.setAttribute("download","Template import-siswa.xlsx"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:"Download Template"}),(0,u.jsx)("input",{type:"file",className:"file-input file-input-bordered w-full",onChange:e=>{P(e.target.files[0])}}),(0,u.jsxs)("div",{className:"modal-action",children:[(0,u.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{if(!S)return void j.oR.error("No file selected.",{position:"top-right",duration:4e3});const e=new FormData;e.append("file",S),E(!0);try{await b.A.post("/admin/importStudent",e,{headers:{Authorization:`Bearer ${I}`,"Content-Type":"multipart/form-data"}});j.oR.success("File uploaded successfully!",{position:"top-right",duration:4e3}),$(k)}catch(s){console.error("Error uploading file:",s),j.oR.error("Failed to upload file.",{position:"top-right",duration:4e3})}finally{E(!1),P(null)}},disabled:T,children:T?"Uploading...":"Submit"}),(0,u.jsx)("button",{className:"btn",children:"Close"})]})]})})]})};const v=function(){const e=(0,r.wA)();return(0,t.useEffect)((()=>{e((0,n.wE)({title:"Data Siswa/i"}))}),[]),(0,u.jsx)(k,{})}},6804:()=>{},2400:(e,a,s)=>{s.d(a,{A:()=>n});var t=s(7565);function r(e,a){let{title:s,titleId:r,...n}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),s?t.createElement("title",{id:r},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const n=t.forwardRef(r)},19:(e,a,s)=>{s.d(a,{A:()=>n});var t=s(7565);function r(e,a){let{title:s,titleId:r,...n}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),s?t.createElement("title",{id:r},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const n=t.forwardRef(r)},4424:(e,a,s)=>{s.d(a,{A:()=>n});var t=s(7565);function r(e,a){let{title:s,titleId:r,...n}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),s?t.createElement("title",{id:r},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const n=t.forwardRef(r)}}]);
//# sourceMappingURL=381.0505ae74.chunk.js.map