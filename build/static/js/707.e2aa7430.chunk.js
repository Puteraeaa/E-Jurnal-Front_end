"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[707],{4317:(e,t,o)=>{o.d(t,{A:()=>g});var a=o(7565),r=o(6400),n=o(9132),l=o(1795),s=o(754),d=(o(5963),o(9930)),i=o.n(d),u=o(3579),c=(o(7),o(7929));const b=new(i().Icon)({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41]}),m=e=>{let{setLatLng:t}=e;const[o,l]=(0,a.useState)(null);return(0,r.Po)({click(e){l(e.latlng),t(e.latlng)}}),null===o?null:(0,c.jsx)(n.p,{position:o,icon:b})},p=e=>{let{provider:t,setLatLng:o}=e;const n=(0,r.ko)();return(0,a.useEffect)((()=>{const e=new u.Vn({provider:t,style:"bar",autoClose:!0,retainZoomLevel:!1,searchLabel:"Enter address or place",keepResult:!0});return n.addControl(e),n.on("geosearch/showlocation",(function(e){const{x:t,y:a}=e.location;o({lat:a,lng:t})})),()=>n.removeControl(e)}),[n,t,o]),null},g=e=>{let{setLatLng:t}=e;const o=new u.F6;return(0,c.jsxs)(l.W,{center:[-2.5,118],zoom:5,style:{height:"300px",width:"100%"},children:[(0,c.jsx)(s.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"\xa9 OpenStreetMap contributors"}),(0,c.jsx)(p,{provider:o,setLatLng:t}),(0,c.jsx)(m,{setLatLng:t})]})}},1858:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var a=o(7565),r=o(3292),n=o(4963),l=o(1030),s=o(4317),d=o(6709),i=o(896),u=o(1918),c=o(7929);const b=i.A.get("token"),m=JSON.parse(i.A.get("user")).id,p=()=>{const e=(0,l.Zp)(),[t,o]=(0,a.useState)(),[r,n]=(0,a.useState)({username:"",name:"",bidang:"",alamat:"",longitude:"",latitude:"",industryMentorName:"",industryMentorNo:"",roles:""});(0,a.useEffect)((()=>{(async()=>{try{const e=await d.A.get(`admin/users/${m}`,{headers:{Authorization:`Bearer ${b}`}});if(o(e.data.data.user_id),e.data&&e.data.data){const{name:t,roles:o,industries:a}=e.data.data;n({username:t||"",name:(null===a||void 0===a?void 0:a.name)||"",bidang:(null===a||void 0===a?void 0:a.bidang)||"",alamat:(null===a||void 0===a?void 0:a.alamat)||"",longitude:(null===a||void 0===a?void 0:a.longitude)||"",latitude:(null===a||void 0===a?void 0:a.latitude)||"",industryMentorName:(null===a||void 0===a?void 0:a.industryMentorName)||"",industryMentorNo:(null===a||void 0===a?void 0:a.industryMentorNo)||"",roles:o.join(", ")||""})}else console.error("Unexpected response structure:",e.data),u.oR.error("Failed to load lead data. Data format is incorrect.",{position:"top-right",duration:4e3})}catch(e){console.error("Error fetching lead data:",e),u.oR.error("Failed to load lead data.",{position:"top-right",duration:4e3})}})()}),[t]);const i=e=>{const{name:t,value:o}=e.target;n((e=>({...e,[t]:o})))},{username:p,name:g,bidang:x,alamat:h,longitude:f,latitude:y,industryMentorName:v,industryMentorNo:j,roles:N}=r;return(0,c.jsx)("div",{className:"container mx-auto my-10 px-4",children:(0,c.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Edit Data Industri"}),(0,c.jsx)("p",{className:"text-center border-b pb-4 mb-4",children:"Silakan edit form di bawah!"}),(0,c.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await d.A.put(`admin/users/${m}`,{...r,roles:r.roles.split(", ").map((e=>e.trim()))},{headers:{Authorization:`Bearer ${b}`}}),u.oR.success("Lead updated successfully!",{position:"top-right",duration:4e3}),e("/app/data/profile-settings")}catch(o){if(o.response){console.error("Error response data:",o.response.data);const e=o.response.data.errors;if(e){const t=Object.values(e)[0][0];u.oR.error(`Failed to update lead: ${t}`,{position:"top-right",duration:4e3})}else u.oR.error(`Failed to update lead: ${o.response.data.message||"Please check the form fields."}`,{position:"top-right",duration:4e3})}else console.error("Error updating lead:",o),u.oR.error("Failed to update lead.",{position:"top-right",duration:4e3})}},children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Username"}),(0,c.jsx)("input",{type:"text",name:"username",value:p,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Nama Industri"}),(0,c.jsx)("input",{type:"text",name:"name",value:g,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Bidang"}),(0,c.jsx)("input",{type:"text",name:"bidang",value:x,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Alamat"}),(0,c.jsx)("input",{type:"text",name:"alamat",value:h,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Longitude"}),(0,c.jsx)("input",{type:"text",name:"longitude",value:f,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,readOnly:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Latitude"}),(0,c.jsx)("input",{type:"text",name:"latitude",value:y,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,readOnly:!0})]}),(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)(s.A,{setLatLng:e=>{let{lat:t,lng:o}=e;n((e=>({...e,latitude:t,longitude:o})))}})}),(0,c.jsx)("button",{type:"button",className:"w-full px-4 py-2 text-white bg-green-500 hover:bg-green-700 rounded-lg mb-4",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;n((e=>({...e,latitude:t.toFixed(6),longitude:o.toFixed(6)}))),u.oR.success("Location updated successfully!",{position:"top-right",duration:4e3})}),(e=>{console.error("Error fetching location:",e),u.oR.error("Failed to fetch location. Please enable location services.",{position:"top-right",duration:4e3})})):u.oR.error("Geolocation is not supported by this browser.",{position:"top-right",duration:4e3})},children:"Tambah lokasi dengan posisi anda saat ini"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pembimbing"}),(0,c.jsx)("input",{type:"text",name:"industryMentorName",value:v,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"No. Pembimbing"}),(0,c.jsx)("input",{type:"text",name:"industryMentorNo",value:j,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",hidden:!0,children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Roles"}),(0,c.jsx)("input",{type:"text",name:"roles",value:N,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,c.jsx)("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-blue-500 hover:bg-blue-700 rounded-lg",children:"Save"}),(0,c.jsx)("button",{type:"button",className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg",onClick:()=>e("/app/data/users"),children:"Cancel"})]})]})]})})};const g=function(){const e=(0,r.wA)();return(0,a.useEffect)((()=>{e((0,n.wE)({title:"Settings"}))}),[]),(0,c.jsx)(p,{})}}}]);
//# sourceMappingURL=707.e2aa7430.chunk.js.map