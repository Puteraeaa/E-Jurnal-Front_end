"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[341],{341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(7565),r=a(3292),l=a(4963),d=a(1030),i=a(477),n=a(6709),c=a(896),o=a(8758),x=a(7929);function m(){return(0,x.jsxs)("tr",{className:"bg-gray-300 animate-pulse",children:[(0,x.jsx)("td",{className:"p-4",children:(0,x.jsx)("div",{className:"bg-gray-400 h-6 w-32 rounded"})}),(0,x.jsx)("td",{className:"p-4",children:(0,x.jsx)("div",{className:"bg-gray-400 h-4 w-24 rounded"})}),(0,x.jsx)("td",{className:"p-4",children:(0,x.jsx)("div",{className:"bg-gray-400 h-4 w-24 rounded"})}),(0,x.jsx)("td",{className:"p-4",children:(0,x.jsx)("div",{className:"bg-gray-400 h-4 w-32 rounded"})}),(0,x.jsx)("td",{className:"p-4",children:(0,x.jsx)("div",{className:"bg-gray-400 h-4 w-32 rounded"})})]})}const u=function(){const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),[l,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[j,y]=(0,s.useState)([]),[v,N]=(0,s.useState)([]),[f,w]=(0,s.useState)(""),[k,P]=(0,s.useState)(1),[A,S]=(0,s.useState)({currentPage:1,perPage:5,total:0}),[C,_]=(0,s.useState)(!1),L=c.A.get("token"),M=JSON.parse(c.A.get("user")),$=(0,d.Zp)();(0,s.useEffect)((()=>{(async()=>{try{const e=await n.A.get("admin/classes",{headers:{Authorization:`Bearer ${L}`}});y(Array.isArray(e.data.data.data)?e.data.data.data:[])}catch(e){}})(),(async()=>{try{const e=await n.A.get("admin/departemen",{headers:{Authorization:`Bearer ${L}`}});N(Array.isArray(e.data.data.data)?e.data.data.data:[])}catch(e){}})()}),[]),(0,s.useEffect)((()=>{(async()=>{const e=M.roles;try{let a;const s=new URLSearchParams({search:l,departemen_id:g,classes_id:h,page:k}).toString();a="siswa"===e?await n.A.get("admin/student-jurnal",{headers:{Authorization:`Bearer ${L}`}}):await n.A.get(`admin/indexRole-jurnal?${s}`,{headers:{Authorization:`Bearer ${L}`}}),t(a.data.data.data||[]),S({currentPage:a.data.data.current_page,perPage:a.data.data.per_page,total:a.data.data.total}),console.log(a.data.data),r(!1)}catch(a){r(!1)}})()}),[l,h,g,k]),Math.ceil(A.total/A.perPage);const B=e=>{P(e)},E=e.filter((e=>{var t;return null===(t=e.users.students)||void 0===t?void 0:t.name.toLowerCase().includes(f.toLowerCase())}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"container mx-auto p-6",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-[#1c2229] shadow-md rounded-lg p-6 mb-6",children:[(0,x.jsxs)("p",{className:"border-b pb-2 font-bold text-xl md:text-4xl text-center",children:[(0,x.jsx)("i",{className:"fas fa-chart-pie dark:text-white text-blue-600"})," ","Jurnal Laporan Harian"]}),(0,x.jsxs)("p",{className:"text-gray-600 font-semibold mt-2 dark:text-white text-center text-xs md:text-base",children:["Ini adalah laporan PKL yang dibuat oleh Siswa SMKN 1 Ciomas dari semua"," ",(0,x.jsx)("span",{className:"font-bold"})," kejuruan."]})]}),(0,x.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,x.jsx)("input",{type:"text",placeholder:"Search",value:f,onChange:e=>w(e.target.value),className:"input w-full max-w-xs input-bordered h-9"}),(0,o.A)(["siswa.delete","penilaian.create"])&&(0,x.jsxs)("button",{onClick:()=>document.getElementById("my_modal_3").showModal(),className:"inline-block bg-blue-500 text-white text-sm font-semibold md:py-1 md:px-2 md:text-base py-1 px-2 rounded hover:bg-blue-600 transition-colors duration-300",children:[(0,x.jsx)("i",{className:"fa-solid fa-filter"})," Filter"]}),(0,o.A)(["murid.index"])&&(0,x.jsxs)(i.N_,{to:"/app/laporan-pkl/tambah",className:"inline-block bg-blue-500 text-white text-sm font-semibold md:py-1 md:px-2 md:text-base py-1 px-2 rounded hover:bg-blue-600 transition-colors duration-300",children:[(0,x.jsx)("i",{className:"fa-solid fa-plus"})," Tambah Laporan"]})]}),(0,x.jsx)("dialog",{id:"my_modal_3",className:"modal",children:(0,x.jsxs)("div",{className:"modal-box",children:[(0,x.jsx)("form",{method:"dialog",children:(0,x.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"\u2715"})}),(0,x.jsx)("h3",{className:"font-bold text-lg",children:"Filter"}),(0,x.jsxs)("div",{className:"mt-4 ",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kelas"}),(0,x.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"select w-full max-w-xs input-bordered h-9",children:[(0,x.jsx)("option",{value:"",children:"Pilih Kelas"}),j.map((e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Jurusan"}),(0,x.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"select w-full max-w-xs input-bordered h-9 mb-4 text-gray-700 dark:text-gray-300",children:[(0,x.jsx)("option",{value:"",children:"Pilih Jurusan"}),v.map((e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]})}),(0,x.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,x.jsxs)("table",{className:"md:w-[100%] w-[400%]  divide-y divide-gray-200 ",children:[(0,x.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-900 dark:text-white",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-6 py-3 text-left  text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider=",children:"Nama"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Tempat PKL"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left  text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Jurusan"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Tanggal"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Deskripsi"})]})}),(0,x.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-900 dark:divide-gray-700",children:a?Array(6).fill(0).map(((e,t)=>(0,x.jsx)(m,{},t))):E.length>0?E.map((e=>{var t,a,s,r,l,d,i,n,c,o,m,u,h,p,g,b,j,y;return(0,x.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:bg-gray-800",onClick:()=>{return t=e.id,void $(`/app/detail-laporan/${t}`);var t},children:[(0,x.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 w-[200px]",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("img",{src:null!==(t=e.users)&&void 0!==t&&null!==(a=t.students)&&void 0!==a&&a.image&&"https://api.jurnal.pplgsmkn1ciomas.my.id/storage"!==(null===(s=e.users.students)||void 0===s?void 0:s.image)?e.users.students.image:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Profile Mentor",className:"w-10 h-10 rounded-full border object-cover mr-3"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"font-medium text-gray-900 dark:text-white w-[200px]",children:null!==(r=null===(l=e.users.students)||void 0===l?void 0:l.name)&&void 0!==r?r:"-"}),(0,x.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:null!==(d=null===(i=e.users)||void 0===i||null===(n=i.students)||void 0===n||null===(c=n.classes)||void 0===c?void 0:c.name)&&void 0!==d?d:"-"})]})]})}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white w-[200px]",children:null!==(o=null===(m=e.users)||void 0===m||null===(u=m.students)||void 0===u||null===(h=u.industries)||void 0===h?void 0:h.name)&&void 0!==o?o:"-"}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white w-[200px]",children:null!==(p=null===(g=e.users)||void 0===g||null===(b=g.students)||void 0===b||null===(j=b.departements)||void 0===j?void 0:j.name)&&void 0!==p?p:"-"}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 w-[130px]",children:e.date}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 truncate-multiline mb-3",children:(y=e.description,y?y.replace(/<\/?[^>]+(>|$)/g,""):"")})]},e.id)})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-600 dark:text-white",children:"No records found."})})})]})})]}),(0,x.jsx)("div",{className:"flex justify-center mt-4 gap-2",children:(()=>{const e=[],t=Math.ceil(A.total/A.perPage);e.push((0,x.jsx)("button",{className:"join-item btn "+(1===A.currentPage?"btn-active":""),onClick:()=>B(1),children:"1"},1)),A.currentPage>3&&e.push((0,x.jsx)("button",{className:"join-item btn btn-disabled",children:"..."},"prev-ellipsis"));const a=Math.max(2,A.currentPage-1),s=Math.min(t-1,A.currentPage+1);for(let r=a;r<=s;r++)e.push((0,x.jsx)("button",{className:"join-item btn "+(A.currentPage===r?"btn-active":""),onClick:()=>B(r),children:r},r));if(A.currentPage<t-2&&e.push((0,x.jsx)("button",{className:"join-item btn btn-disabled",children:"..."},"next-ellipsis")),t>1)return e.push((0,x.jsx)("button",{className:"join-item btn "+(A.currentPage===t?"btn-active":""),onClick:()=>B(t),children:t},t)),(0,x.jsx)(x.Fragment,{children:e})})()})]})};const h=function(){const e=(0,r.wA)();return(0,s.useEffect)((()=>{e((0,l.wE)({title:"Laporan"}))}),[]),(0,x.jsx)(u,{})}}}]);
//# sourceMappingURL=341.c1c23ff6.chunk.js.map