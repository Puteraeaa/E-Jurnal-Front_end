"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[794],{5794:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var r=t(7565),s=t(1030),l=t(5041),i=t.n(l),n=(t(3422),t(6709)),o=t(896),d=t(1774),c=t.n(d),u=t(1918),m=t(7929);function b(){const{id:e}=(0,s.g)(),a=(0,s.Zp)(),[t,l]=(0,r.useState)(""),[d,b]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[N,k]=(0,r.useState)(null),[w,S]=(0,r.useState)({}),C=o.A.get("token");(0,r.useEffect)((()=>{const a=(new Date).toISOString().split("T")[0];b(a);(async()=>{try{const t=(await n.A.get(`admin/jurnal/${e}`,{headers:{Authorization:`Bearer ${C}`}})).data.data;g(t.judul||""),l(t.description||""),b(t.date||a),h(t.start_time||""),j(t.end_time||""),v(t.tools||"")}catch(t){}})()}),[e,C]);return(0,m.jsx)("div",{className:"container mx-auto my-10",children:(0,m.jsx)("div",{className:"flex flex-col",children:(0,m.jsxs)("div",{className:"dark:bg-gray-800 bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Edit Laporan Kegiatan PKL"}),(0,m.jsx)("p",{className:"text-center border-b pb-4 mb-4",children:"Silakan perbarui form di bawah!"}),(0,m.jsxs)("form",{onSubmit:async r=>{r.preventDefault();const s={};if(t.length<150&&(s.deskripsi=["Deskripsi harus terdiri dari minimal 150 karakter"]),d||(s.tanggal=["Tanggal Wajib diisi"]),x||(s.start_time=["Start Time Wajib diisi"]),f||(s.end_time=["End Time Wajib diisi"]),y||(s.tools=["Tools Wajib diisi"]),Object.keys(s).length>0)S(s);else try{if((await c().fire({title:"Memperbarui Program",text:"Apakah Anda yakin ingin Memperbarui Program?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Perbarui!"})).isConfirmed){const r=new FormData;r.append("description",t),r.append("start_time",x),r.append("end_time",f),r.append("tools",y),r.append("date",d),N&&r.append("image",N);for(let[e,a]of r.entries());await n.A.patch(`admin/jurnal/${e}`,r,{headers:{Authorization:`Bearer ${C}`}}),u.Ay.success("Program updated successfully!",{position:"top-right",duration:4e3}),a(`/app/detail-laporan/${e}`)}}catch(l){u.Ay.error("Failed to update program. Please try again later.",{position:"top-right",duration:4e3})}},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Deskripsi Laporan"}),(0,m.jsx)(i(),{value:t,onChange:l,className:"bg-white border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",theme:"snow",placeholder:"Describe your activity..."}),w.deskripsi&&(0,m.jsx)("div",{className:"text-red-600 mt-2",children:w.deskripsi[0]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Image (optional)"}),(0,m.jsx)("input",{type:"file",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",onChange:e=>k(e.target.files[0])})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tools Used"}),(0,m.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",value:y,onChange:e=>v(e.target.value),placeholder:"Enter tools used"}),w.tools&&(0,m.jsx)("div",{className:"text-red-600 mt-2",children:w.tools[0]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tanggal Laporan"}),(0,m.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",value:d,onChange:e=>b(e.target.value)}),w.tanggal&&(0,m.jsx)("div",{className:"text-red-600 mt-2",children:w.tanggal[0]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Start Time"}),(0,m.jsx)("input",{type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",value:x,onChange:e=>h(e.target.value)}),w.start_time&&(0,m.jsx)("div",{className:"text-red-600 mt-2",children:w.start_time[0]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"End Time"}),(0,m.jsx)("input",{type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",value:f,onChange:e=>j(e.target.value)}),w.end_time&&(0,m.jsx)("div",{className:"text-red-600 mt-2",children:w.end_time[0]})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-blue-500 hover:bg-blue-700 rounded-lg",children:[(0,m.jsx)("i",{className:"fa fa-save mr-2"})," Save"]})})]})]})})})}}}]);
//# sourceMappingURL=794.43c6ff61.chunk.js.map