{"version":3,"file":"static/js/67.d91a9b00.chunk.js","mappings":"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","sources":["features/Absen/Rekap.jsx","pages/protected/Rekap.js","../node_modules/react-leaflet/lib/hooks.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Api from \"../../api\";\nimport Cookies from \"js-cookie\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport hasAnyPermission from \"../../utils/Permissions\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\n\n// Fix for marker icons not appearing\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\")\n});\n\nconst AttendanceSummary = () => {\n  const [attendanceRecords, setAttendanceRecords] = useState([]);\n  const [selectedRecord, setSelectedRecord] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [paginationLinks, setPaginationLinks] = useState([]);\n  const [photoTab, setPhotoTab] = useState(\"check-in\");\n  const [mapTab, setMapTab] = useState(\"check-in\");\n  const [sortOrder, setSortOrder] = useState(\"asc\"); // Default to ascending\n\n\n  const token = Cookies.get(\"token\");\n  const role = JSON.parse(Cookies.get(\"user\")).roles;\n  const recordsPerPage = 10;\n\n  const sortAttendanceRecords = (records) => {\n    return records.sort((a, b) => {\n      const dateA = new Date(a.date);\n      const dateB = new Date(b.date);\n      return sortOrder === \"asc\" ? dateA - dateB : dateB - dateA; // Ascending or Descending\n    });\n  };\n  \n\n  const normalizeData = (data) => {\n    return Object.values(data).map((day) => {\n      const checkInData = day.entries[\"Masuk\"]?.entries[0] || {};\n      const checkOutData = day.entries[\"Pulang\"]?.entries[0] || {};\n\n      return {\n        date: day.date\n          ? `${\n              [\"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\", \"Minggu\"][\n                new Date(day.date).getDay()\n              ] || \"\"\n            }, ${day.date}`\n          : \"-\",\n        name:\n          checkInData.users.students?.name || checkInData.users?.name || \"-\",\n        statusMasuk: checkInData.status || \"-\",\n        statusPulang: checkOutData.status || \"-\",\n        arrivalTime: checkInData.departureTime\n          ? checkInData.departureTime + \" WIB\"\n          : \"Belum Absen Masuk\",\n        departureTime: checkOutData.departureTime\n          ? checkOutData.departureTime + \" WIB\"\n          : \"Belum Absen Keluar\",\n        arrivalImage: checkInData.image || \"\",\n        departureImage: checkOutData.image || \"\",\n        latitudeMasuk: checkInData.latitude || null,\n        longitudeMasuk: checkInData.longitude || null,\n        latitudePulang: checkOutData.latitude || null,\n        longitudePulang: checkOutData.longitude || null,\n        status: checkInData.absenceReason || null\n      };\n    });\n  };\n\n  const getAttendanceRecords = async (page) => {\n    try {\n      let endpoint = \"\";\n\n      if (role === \"siswa\") {\n        endpoint = `/admin/absenSiswaOnly?page=${page}&limit=${recordsPerPage}`;\n      } else if (role === \"guru\" || role === \"orang tua\" || role === \"industri\") {\n        endpoint = `/admin/absenSiswa?page=${page}&limit=${recordsPerPage}`;\n      } else {\n        endpoint = `/admin/absence?page=${page}&limit=${recordsPerPage}`;\n      }\n\n      const response = await Api.get(endpoint, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      const data = response?.data?.data || [];\n      console.log(data);\n    \n\n      if (typeof data === \"object\") {\n        const normalizedData = normalizeData(data);\n        setAttendanceRecords(normalizedData);\n      } else {\n        setAttendanceRecords([]);\n      }\n\n      setTotalPages(response?.data?.totalPages || 1);\n      setPaginationLinks(response?.data?.links || []);\n    } catch (error) {\n      toast.error(\"Failed to fetch attendance records\");\n    }\n  };\n\n  useEffect(() => {\n    getAttendanceRecords(currentPage);\n  }, [currentPage]);\n\n  const handlePageChange = (url) => {\n    const urlParams = new URLSearchParams(url.split(\"?\")[1]);\n    const page = urlParams.get(\"page\");\n\n    if (page) {\n      setCurrentPage(parseInt(page, 10));\n    }\n  };\n\n  // Component to adjust map view\n  const MapViewUpdater = ({ position }) => {\n    const map = useMap();\n\n    useEffect(() => {\n      if (position) {\n        map.setView(position, 13); // Adjust zoom level if needed\n      }\n    }, [position, map]);\n\n    return null;\n  };\n\n  return (\n    <div className=\"container mx-auto mt-5 px-4 md:mt-10 md:px-8 mb-[400px]\">\n      <h1 className=\"text-2xl font-bold mb-6 text-center md:text-3xl\">\n        Rekap Absensi \n      </h1>\n      <div className=\"flex justify-end px-4 items-center mb-4\">\n  <h3 className=\"text-lg font-semibold text-gray-700 dark:text-gray-300 mr-4\">\n    Urutkan Berdasarkan:\n  </h3>\n  <select\n    value={sortOrder}\n    onChange={(e) => setSortOrder(e.target.value)}\n    className=\"border border-gray-300 rounded p-1 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-400\"\n  >\n    <option value=\"asc\">Urutkan Terbaru ^</option>\n    <option value=\"desc\">Urutkan Terlama v</option>\n  </select>\n</div>\n\n\n\n      <div className=\"overflow-x-auto w-full\">\n        <table className=\"min-w-full bg-white border border-gray-300 dark:text-white dark:bg-[#1c2229]\">\n          <thead>\n            <tr className=\"bg-gray-200 text-gray-700\">\n              <th className=\"py-4 px-6 border-b text-center\">No</th>\n              <th className=\"py-4 px-6 border-b text-center\">Tanggal</th>\n              <th className=\"py-4 px-6 border-b text-center\">Nama</th>\n              <th className=\"py-4 px-6 border-b text-center\">Status</th>\n              <th className=\"py-4 px-6 border-b text-center\">Waktu Masuk</th>\n              <th className=\"py-4 px-6 border-b text-center\">Waktu Keluar</th>\n              <th className=\"py-4 px-6 border-b text-center\">Photo</th>\n              <th className=\"py-4 px-6 border-b text-center\">Action</th>\n            </tr>\n          </thead>\n          <tbody>\n          {sortAttendanceRecords(attendanceRecords).length > 0 ? (\n              attendanceRecords.map((record, index) => (\n                <tr key={index} className=\"h-20\">\n                  <td className=\"py-4 px-6 border-b text-center\">\n                    {(currentPage - 1) * recordsPerPage + index + 1}\n                  </td>\n                  <td className=\"md:py-4 md:px-6 border-b text-center whitespace-normal break-words \">\n                    {record.date}\n                  </td>\n                  <td className=\"py-4 px-6 border-b text-center whitespace-normal break-words\">\n                    {record.name}\n                  </td>\n                  <td className=\"py-4 px-6 border-b text-center whitespace-normal break-words\">\n                    {record.status}\n                  </td>\n                  <td className=\"py-4 px-6 border-b text-center whitespace-normal break-words\">\n                    {record.arrivalTime}\n                  </td>\n                  <td className=\"py-4 px-6 border-b text-center whitespace-normal break-words\">\n                    {record.departureTime}\n                  </td>\n                  <td className=\"py-4 px-6 border-b text-center whitespace-normal break-words\">\n                    <img\n                      src={record.arrivalImage || \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"}\n                      alt=\"Attendance\"\n                      className=\"w-16 h-16 object-cover mx-auto cursor-pointer rounded-full\"\n                      onClick={() => {\n                        setSelectedRecord(record);\n                        document.getElementById(\"my_modal_3\").showModal();\n                      }}\n                    />\n                  </td>\n                  <td className=\"py-4 px-6 border-b text-center whitespace-normal break-words\">\n                    <button\n                      className=\"btn btn-primary btn-sm pl-2\"\n                      onClick={() => {\n                        setSelectedRecord(record);\n                        document.getElementById(\"my_modal_maps\").showModal();\n                      }}\n                    >\n                      Lihat Posisi\n                    </button>\n                    {hasAnyPermission([\"siswa.delete\"]) && (\n                      <button className=\"btn bg-green-500 btn-sm md:ml-2 mt-2\">\n                        Verifikasi\n                      </button>\n                    )}\n                  </td>\n                </tr>\n              ))\n            ) : (\n              <tr>\n                <td colSpan=\"7\" className=\"py-4 px-6 text-center\">\n                  No records found\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n\n        {/* Image Modal */}\n        <dialog id=\"my_modal_3\" className=\"modal\">\n          <div className=\"modal-box\">\n            <form method=\"dialog\">\n              <button className=\"btn btn-sm btn-circle btn-ghost absolute right-2 top-2\">\n                ✕\n              </button>\n            </form>\n            <h3 className=\"font-bold text-lg mb-2\">Absensi</h3>\n             {/* Tab navigasi untuk Absensi */}\n        <div className=\"tabs\">\n          <a\n            className={`tab tab-lifted ${\n              mapTab === \"check-in\"\n                ? \"tab-active border-b-2 border-blue-500\"\n                : \"\"\n            }`}\n            onClick={() => {\n              setMapTab(\"check-in\");\n              setPhotoTab(\"check-in\");\n            }}\n          >\n            Masuk\n          </a>\n          <a\n            className={`tab tab-lifted ${\n              mapTab === \"check-out\"\n                ? \"tab-active border-b-2 border-blue-500\"\n                : \"\"\n            }`}\n            onClick={() => {\n              setMapTab(\"check-out\");\n              setPhotoTab(\"check-out\");\n            }}\n          >\n            Pulang\n          </a>\n        </div>\n            <div className=\"mt-4\">\n              {photoTab === \"check-out\" && !selectedRecord?.departureImage ? (\n                <p className=\"text-red-500\">Belum Absen Pulang</p>\n              ) : (\n                <img\n                  src={\n                    photoTab === \"check-in\"\n                      ? selectedRecord?.arrivalImage\n                      : selectedRecord?.departureImage\n                  }\n                  alt=\"Attendance\"\n                  className=\"w-full h-auto object-cover\"\n                />\n              )}\n            </div>\n          </div>\n        </dialog>\n\n        {/* Map Modal */}\n        <dialog id=\"my_modal_maps\" className=\"modal\">\n          <div className=\"modal-box\">\n            <form method=\"dialog\">\n              <button className=\"btn btn-sm btn-circle btn-ghost absolute right-2 top-2\">\n                ✕\n              </button>\n            </form>\n            <h3 className=\"font-bold text-lg mb-2\">Lokasi Absen</h3>\n\n            <div className=\"tabs\">\n              <a\n                className={`tab tab-lifted ${\n                  mapTab === \"check-in\"\n                    ? \"tab-active border-b-2 border-blue-500\"\n                    : \"\"\n                }`}\n                onClick={() => setMapTab(\"check-in\")}\n              >\n                Masuk\n              </a>\n              <a\n                className={`tab tab-lifted ${\n                  mapTab === \"check-out\"\n                    ? \"tab-active border-b-2 border-blue-500\"\n                    : \"\"\n                }`}\n                onClick={() => setMapTab(\"check-out\")}\n              >\n                Pulang\n              </a>\n            </div>\n\n            <div className=\"w-full h-80\">\n              {mapTab === \"check-out\" &&\n              (!selectedRecord?.latitudePulang ||\n                !selectedRecord?.longitudePulang) ? (\n                <p className=\"text-red-500 font-bold text-center mt-8\">\n                  Anda belum absen pulang, peta tidak dapat ditampilkan.\n                </p>\n              ) : (\n                <iframe\n                  src={\n                    mapTab === \"check-in\"\n                      ? `https://www.google.com/maps?q=${selectedRecord?.latitudeMasuk},${selectedRecord?.longitudeMasuk}&output=embed`\n                      : `https://www.google.com/maps?q=${selectedRecord?.latitudePulang},${selectedRecord?.longitudePulang}&output=embed`\n                  }\n                  width=\"100%\"\n                  height=\"100%\"\n                  frameBorder=\"0\"\n                  style={{ border: 0 }}\n                  allowFullScreen=\"\"\n                  aria-hidden=\"false\"\n                  tabIndex=\"0\"\n                ></iframe>\n              )}\n            </div>\n          </div>\n        </dialog>\n      </div>\n\n      {/* Pagination Controls */}\n      <div className=\"flex justify-between mt-4\">\n        <button\n          className=\"btn btn-primary btn-sm\"\n          disabled={currentPage === 1}\n          onClick={() => handlePageChange(paginationLinks.prev)}\n        >\n          Previous\n        </button>\n        <button\n          className=\"btn btn-primary btn-sm\"\n          disabled={currentPage === totalPages}\n          onClick={() => handlePageChange(paginationLinks.next)}\n        >\n          Next\n        </button>\n      </div>\n\n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default AttendanceSummary;\n","import { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { setPageTitle } from '../../features/common/headerSlice'\nimport Absen from '../../features/Absen/Rekap'\n\nfunction InternalPage(){\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(setPageTitle({ title : \"Rekap Absen\"}))\n      }, [])\n\n\n    return(\n        <Absen />\n    )\n}\n\nexport default InternalPage","import { useLeafletContext } from '@react-leaflet/core';\nimport { useEffect } from 'react';\nexport function useMap() {\n    return useLeafletContext().map;\n}\nexport function useMapEvent(type, handler) {\n    const map = useMap();\n    useEffect(function addMapEventHandler() {\n        // @ts-ignore event type\n        map.on(type, handler);\n        return function removeMapEventHandler() {\n            // @ts-ignore event type\n            map.off(type, handler);\n        };\n    }, [\n        map,\n        type,\n        handler\n    ]);\n    return map;\n}\nexport function useMapEvents(handlers) {\n    const map = useMap();\n    useEffect(function addMapEventHandlers() {\n        map.on(handlers);\n        return function removeMapEventHandlers() {\n            map.off(handlers);\n        };\n    }, [\n        map,\n        handlers\n    ]);\n    return map;\n}\n"],"names":["L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","AttendanceSummary","attendanceRecords","setAttendanceRecords","useState","selectedRecord","setSelectedRecord","currentPage","setCurrentPage","totalPages","setTotalPages","paginationLinks","setPaginationLinks","photoTab","setPhotoTab","mapTab","setMapTab","sortOrder","setSortOrder","token","Cookies","get","role","JSON","parse","roles","getAttendanceRecords","async","_response$data","_response$data2","_response$data3","endpoint","page","response","Api","headers","Authorization","data","console","log","normalizedData","Object","values","map","day","_day$entries$Masuk","_day$entries$Pulang","_checkInData$users$st","_checkInData$users","checkInData","entries","checkOutData","date","Date","getDay","name","users","students","statusMasuk","status","statusPulang","arrivalTime","departureTime","arrivalImage","image","departureImage","latitudeMasuk","latitude","longitudeMasuk","longitude","latitudePulang","longitudePulang","absenceReason","normalizeData","links","error","toast","useEffect","handlePageChange","url","URLSearchParams","split","parseInt","_jsxs","className","children","_jsx","value","onChange","e","target","records","sort","a","b","dateA","dateB","length","record","index","src","alt","onClick","document","getElementById","showModal","hasAnyPermission","colSpan","id","method","width","height","frameBorder","style","border","allowFullScreen","tabIndex","disabled","prev","next","ToastContainer","dispatch","useDispatch","setPageTitle","title","Absen","useMap","useLeafletContext","useMapEvents","handlers","on","off"],"sourceRoot":""}