{"version":3,"file":"static/js/625.9d99a450.chunk.js","mappings":"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","sources":["../node_modules/react-leaflet/lib/Popup.js","features/Absen/Rekap.jsx","pages/protected/Rekap.js"],"sourcesContent":["import { createElementObject, createOverlayComponent } from '@react-leaflet/core';\nimport { Popup as LeafletPopup } from 'leaflet';\nimport { useEffect } from 'react';\nexport const Popup = createOverlayComponent(function createPopup(props, context) {\n    const popup = new LeafletPopup(props, context.overlayContainer);\n    return createElementObject(popup, context);\n}, function usePopupLifecycle(element, context, { position  }, setOpen) {\n    useEffect(function addPopup() {\n        const { instance  } = element;\n        function onPopupOpen(event) {\n            if (event.popup === instance) {\n                instance.update();\n                setOpen(true);\n            }\n        }\n        function onPopupClose(event) {\n            if (event.popup === instance) {\n                setOpen(false);\n            }\n        }\n        context.map.on({\n            popupopen: onPopupOpen,\n            popupclose: onPopupClose\n        });\n        if (context.overlayContainer == null) {\n            // Attach to a Map\n            if (position != null) {\n                instance.setLatLng(position);\n            }\n            instance.openOn(context.map);\n        } else {\n            // Attach to container component\n            context.overlayContainer.bindPopup(instance);\n        }\n        return function removePopup() {\n            context.map.off({\n                popupopen: onPopupOpen,\n                popupclose: onPopupClose\n            });\n            context.overlayContainer?.unbindPopup();\n            context.map.removeLayer(instance);\n        };\n    }, [\n        element,\n        context,\n        setOpen,\n        position\n    ]);\n});\n","import React, { useState, useEffect } from \"react\";\r\nimport Api from \"../../api\";\r\nimport Cookies from \"js-cookie\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport hasAnyPermission from \"../../utils/Permissions\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nconst AttendanceSummary = () => {\r\n  const [attendanceRecords, setAttendanceRecords] = useState([]);\r\n  const [selectedRecord, setSelectedRecord] = useState(null);\r\n  const token = Cookies.get(\"token\");\r\n\r\n  // Fetch attendance records from the server\r\n  const getAttendanceRecords = async () => {\r\n    try {\r\n      const response = await Api.get(\"/admin/absence\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      });\r\n      console.log(\"Response data:\", response.data); // Log the data to see its structure\r\n\r\n      setAttendanceRecords(response.data.data.data);\r\n\r\n      // Ensure the response data is an array\r\n    } catch (error) {\r\n      console.error(\"Error fetching attendance records:\", error.message);\r\n      toast.error(\"Failed to fetch attendance records\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAttendanceRecords();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-5 px-4 md:mt-10 md:px-8 mb-[400px]\">\r\n      <h1 className=\"text-2xl font-bold mb-6 text-center md:text-3xl\">\r\n        Rekap Absensi\r\n      </h1>\r\n\r\n      <div className=\"overflow-x-auto w-full\">\r\n        <table className=\"min-w-full bg-white border border-gray-300 dark:text-white dark:bg-[#1c2229]\">\r\n          <thead>\r\n            <tr className=\"bg-gray-200 text-gray-700\">\r\n              <th className=\"py-2 px-4 border-b\">No</th>\r\n              <th className=\"py-2 px-4 border-b\">Nama</th>\r\n              <th className=\"py-2 px-4 border-b\">Kelas</th>\r\n              <th className=\"py-2 px-4 border-b\">Status</th>\r\n              <th className=\"py-2 px-4 border-b\">Waktu Masuk</th>\r\n              <th className=\"py-2 px-4 border-b\">Waktu Keluar</th>\r\n              <th className=\"py-2 px-4 border-b\">Photo</th>\r\n              {hasAnyPermission([\"siswa.delete\"]) && <th className=\"py-2 px-4 border-b\">Action</th>}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {attendanceRecords.length > 0 ? (\r\n              attendanceRecords.map((record, index) => (\r\n                <tr key={index}>\r\n                  <td className=\"py-2 px-4 border-b text-center\">{index + 1}</td>\r\n                  <td className=\"py-2 px-4 border-b text-center\">{record.users ? record.users.name : \"-\"}</td>\r\n                  <td className=\"py-2 px-4 border-b text-center\">{record.users ? record.claa : \"-\"}</td>\r\n                  <td className=\"py-2 px-4 border-b text-center\">{record.absenceReason}</td>\r\n                  <td className=\"py-2 px-4 border-b text-center\">{record.arrivalTime}</td>\r\n                  <td className=\"py-2 px-4 border-b text-center\">{record.departureTime}</td>\r\n                  <td className=\"py-2 px-4 border-b text-center\">\r\n                    <img\r\n                      src={record.image}\r\n                      alt=\"Attendance\"\r\n                      className=\"w-12 h-12 object-cover mx-auto cursor-pointer rounded-full md:w-20 md:h-20\"\r\n                      onClick={() => document.getElementById(\"my_modal_3\").showModal()}\r\n                    />\r\n                  </td>\r\n                  <td className=\"py-2 px-4 border-b text-center \">\r\n                    <button \r\n                      className=\"btn btn-primary btn-sm pl-2\" \r\n                      onClick={() => {\r\n                        setSelectedRecord(record);\r\n                        document.getElementById(\"my_modal_maps\").showModal();\r\n                      }}>\r\n                        Lihat Posisi\r\n                    </button>\r\n                  {hasAnyPermission([\"siswa.delete\"]) && (\r\n                    \r\n                      <button className=\"btn btn-primary btn-sm ml-2\">Verifikasi</button>\r\n                    \r\n                  )}\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"8\" className=\"py-2 px-4 text-center\">No records found</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        <dialog id=\"my_modal_3\" className=\"modal\">\r\n          <div className=\"modal-box\">\r\n            <form method=\"dialog\">\r\n              <button className=\"btn btn-sm btn-circle btn-ghost absolute right-2 top-2\">✕</button>\r\n            </form>\r\n            <h3 className=\"font-bold text-lg mb-4\">Expend Photo</h3>\r\n            <img\r\n              src=\"https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\"\r\n              alt=\"Expanded Attendance\"\r\n              className=\"rounded-lg\"\r\n            />\r\n          </div>\r\n        </dialog>\r\n\r\n        <dialog id=\"my_modal_maps\" className=\"modal\">\r\n          <div className=\"modal-box\">\r\n            <form method=\"dialog\">\r\n              <button className=\"btn btn-sm btn-circle btn-ghost absolute right-2 top-2\">✕</button>\r\n            </form>\r\n            <h3 className=\"font-bold text-lg mb-4\">Lokasi Absen</h3>\r\n            {selectedRecord && selectedRecord.latitude && selectedRecord.longitude ? (\r\n              <MapContainer center={[selectedRecord.latitude, selectedRecord.longitude]} zoom={13} style={{ height: \"400px\", width: \"100%\" }}>\r\n                <TileLayer\r\n                  url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                  attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                />\r\n                <Marker position={[selectedRecord.latitude, selectedRecord.longitude]}>\r\n                  <Popup>\r\n                    Lokasi Absen\r\n                  </Popup>\r\n                </Marker>\r\n              </MapContainer>\r\n            ) : (\r\n              <p>Lokasi tidak tersedia</p>\r\n            )}\r\n          </div>\r\n        </dialog>\r\n      </div>\r\n\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceSummary;\r\n","import { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { setPageTitle } from '../../features/common/headerSlice'\nimport Absen from '../../features/Absen/Rekap'\n\nfunction InternalPage(){\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(setPageTitle({ title : \"Rekap Absen\"}))\n      }, [])\n\n\n    return(\n        <Absen />\n    )\n}\n\nexport default InternalPage"],"names":["Popup","createOverlayComponent","props","context","popup","LeafletPopup","overlayContainer","createElementObject","element","setOpen","position","useEffect","instance","onPopupOpen","event","update","onPopupClose","map","on","popupopen","popupclose","setLatLng","openOn","bindPopup","off","unbindPopup","removeLayer","useState","attendanceRecords","setAttendanceRecords","selectedRecord","setSelectedRecord","token","Cookies","getAttendanceRecords","Api","headers","Authorization","response","console","log","data","error","message","toast","className","hasAnyPermission","length","record","index","users","name","claa","absenceReason","arrivalTime","departureTime","src","image","alt","onClick","document","getElementById","showModal","colSpan","id","method","latitude","longitude","MapContainer","center","zoom","style","height","width","TileLayer","url","attribution","Marker","dispatch","useDispatch","setPageTitle","title"],"sourceRoot":""}