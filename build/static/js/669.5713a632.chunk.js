"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[669],{9669:(e,a,r)=>{r.r(a),r.d(a,{default:()=>c});var l=r(7565),s=r(1030),t=r(6709),n=r(896),d=r(1918),o=r(7929);const i=n.A.get("token"),c=()=>{const e=(0,s.Zp)(),{id:a}=(0,s.g)(),[r,n]=(0,l.useState)([]),[c,u]=(0,l.useState)([]),[b,m]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[x,g]=(0,l.useState)([]),[f,y]=(0,l.useState)({user_id:"",username:"",name:"",nis:"",placeOfBirth:"",dateOfBirth:"",gender:"",bloodType:"",alamat:"",image:null,classes_id:"",industri_id:"",departemen_id:"",parents_id:"",teacher_id:""}),j=e=>{const{name:a,value:r,type:l,files:s}=e.target;y((e=>({...e,[a]:"file"===l?s[0]:r})))};return(0,l.useEffect)((()=>{(async()=>{try{const e=await t.A.get(`admin/users/${a}`,{headers:{Authorization:`Bearer ${i}`}}),r=e.data.data.student;y({user_id:r.user_id||"",username:e.data.data.name||"",name:r.name||"",nis:r.nis||"",placeOfBirth:r.placeOfBirth||"",dateOfBirth:r.dateOfBirth||"",gender:r.gender||"",bloodType:r.bloodType||"",alamat:r.alamat||"",image:null,classes_id:r.classes_id||"",industri_id:r.industri_id||"",departemen_id:r.departemen_id||"",parents_id:r.parents_id||"",teacher_id:r.teacher_id||"",roles:"siswa"})}catch(e){console.error("Error fetching student data:",e),d.oR.error("Failed to load student data.",{position:"top-right",duration:4e3})}})(),(async()=>{let e=[],a=1,r=1;try{for(;a<=r;){const l=await t.A.get(`admin/industri?page=${a}`,{headers:{Authorization:`Bearer ${i}`}}),s=l.data.data.data||[];e=[...e,...s],r=l.data.data.last_page,a++}g(e)}catch(l){g([])}})(),(async()=>{let e=[],a=1,r=1;try{for(;a<=r;){const l=await t.A.get(`admin/teacher?page=${a}`,{headers:{Authorization:`Bearer ${i}`}}),s=l.data.data.data||[];e=[...e,...s],r=l.data.data.last_page,a++}n(e)}catch(l){n([])}})(),(async()=>{let e=[],a=1,r=1;try{for(;a<=r;){const l=await t.A.get(`admin/parent?page=${a}`,{headers:{Authorization:`Bearer ${i}`}}),s=l.data.data.data||[];e=[...e,...s],r=l.data.data.last_page,a++}p(e)}catch(l){p([])}})(),(async()=>{let e=[],a=1,r=1;try{for(;a<=r;){const l=await t.A.get(`admin/classes?page=${a}`,{headers:{Authorization:`Bearer ${i}`}}),s=l.data.data.data||[];e=[...e,...s],r=l.data.data.last_page,a++}u(e)}catch(l){u([])}})(),(async()=>{let e=[],a=1,r=1;try{for(;a<=r;){const l=await t.A.get(`admin/departemen?page=${a}`,{headers:{Authorization:`Bearer ${i}`}}),s=l.data.data.data||[];e=[...e,...s],r=l.data.data.last_page,a++}m(e)}catch(l){m([])}})()}),[a]),(0,o.jsx)("div",{className:"container mx-auto my-10 px-4 dark:bg-gray-800",children:(0,o.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-center mb-4 dark:text-gray-100",children:"Edit Data Siswa"}),(0,o.jsx)("p",{className:"text-center border-b pb-4 mb-4 dark:text-white",children:"Silakan update form di bawah!"}),(0,o.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{await t.A.patch(`admin/users/${a}`,f,{headers:{Authorization:`Bearer ${i}`}}),d.oR.success("Lead updated successfully!",{position:"top-right",duration:4e3}),e("/app/data/siswa")}catch(l){if(l.response){console.error("Error response data:",l.response.data);const e=l.response.data.errors;if(e){for(const[a,r]of Object.entries(e))console.error(`Field: ${a}, Errors: ${r.join(", ")}`);d.oR.error(`Failed to update lead: ${Object.values(e)[0][0]}`,{position:"top-right",duration:4e3})}else d.oR.error(`Failed to update lead: ${l.response.data.message||"Please check the form fields."}`,{position:"top-right",duration:4e3})}else console.error("Error updating lead:",l),d.oR.error("Failed to update lead.",{position:"top-right",duration:4e3})}},children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Username"}),(0,o.jsx)("input",{type:"text",name:"username",value:f.username,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Nama Siswa"}),(0,o.jsx)("input",{type:"text",name:"name",value:f.name,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"NIS"}),(0,o.jsx)("input",{type:"text",name:"nis",value:f.nis,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tempat Lahir"}),(0,o.jsx)("input",{type:"text",name:"placeOfBirth",value:f.placeOfBirth,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tanggal Lahir"}),(0,o.jsx)("input",{type:"date",name:"dateOfBirth",value:f.dateOfBirth,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Jenis Kelamin"}),(0,o.jsxs)("select",{name:"gender",value:f.gender,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Pilih Jenis Kelamin"}),(0,o.jsx)("option",{value:"Laki-Laki",children:"Laki-Laki"}),(0,o.jsx)("option",{value:"Perempuan",children:"Perempuan"})]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Golongan Darah"}),(0,o.jsxs)("select",{name:"bloodType",value:f.bloodType,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Pilih Golongan Darah"}),(0,o.jsx)("option",{value:"A",children:"A"}),(0,o.jsx)("option",{value:"B",children:"B"}),(0,o.jsx)("option",{value:"AB",children:"AB"}),(0,o.jsx)("option",{value:"O",children:"O"})]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Alamat"}),(0,o.jsx)("textarea",{name:"alamat",value:f.alamat,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pilih Kelas"}),(0,o.jsxs)("select",{name:"classes_id",value:f.classes_id,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Pilih Kelas"}),c.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pilih Jurusan"}),(0,o.jsxs)("select",{name:"departemen_id",value:f.departemen_id,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Pilih Jurusan"}),b.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pilih Industri"}),(0,o.jsxs)("select",{name:"industri_id",value:f.industri_id,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Pilih Industri"}),x.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pilih Orang Tua"}),(0,o.jsxs)("select",{name:"parent_id",value:f.parents_id,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Pilih Orang Tua"}),h.map((e=>(0,o.jsx)("option",{value:e.id,children:e.nama},e.id)))]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pilih Guru"}),(0,o.jsxs)("select",{name:"teacher_id",value:f.teacher_id,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Pilih Guru"}),r.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Foto Siswa"}),(0,o.jsx)("input",{type:"file",name:"image",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})]}),(0,o.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:bg-blue-600",children:"Update"})]})]})})}}}]);
//# sourceMappingURL=669.5713a632.chunk.js.map