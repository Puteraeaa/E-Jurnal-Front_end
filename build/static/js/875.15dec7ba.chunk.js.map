{"version":3,"file":"static/js/875.15dec7ba.chunk.js","mappings":"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","sources":["features/Absen/Index.jsx","pages/protected/Absen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport Cookies from \"js-cookie\";\nimport Api from \"../../api\";\nimport { Link } from \"react-router-dom\";\n\nconst AbsenceForm = () => {\n  const [location, setLocation] = useState(null);\n  const [photo, setPhoto] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [currentTime, setCurrentTime] = useState({\n    hours: 0,\n    minutes: 0,\n    seconds: 0\n  });\n  const [devices, setDevices] = useState([]);\n  const [selectedDeviceId, setSelectedDeviceId] = useState(\"\");  \n  const [absenceType, setAbsenceType] = useState(\"masuk\"); // State untuk tipe absen\n  const [isAlreadyAbsent, setIsAlreadyAbsent] = useState(false); \n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const token = Cookies.get(\"token\");\n  \n\n  useEffect(() => {\n    const checkAbsen = async () => {\n      try {\n        const response = await Api.get(\"admin/absen-cek\", {\n          headers: { Authorization: `Bearer ${Cookies.get(\"token\")}` },\n        });\n\n        const data = response.data.message;\n\n        // Menentukan apakah absen masuk, pulang, atau sudah absen penuh\n        if (data === \"Masuk\") {\n          setAbsenceType(\"Masuk\");\n        } else if (data === \"Pulang\") {\n          setAbsenceType(\"Pulang\");\n        } else if (data === \"Anda sudah absen pulang hari ini, tidak bisa absen lagi.\") {\n          setIsAlreadyAbsent(true);\n          swal.fire({\n            title: \"Sudah Absen\",\n            text: \"Anda sudah absen masuk dan pulang hari ini.\",\n            icon: \"info\",\n            confirmButtonText: \"OK\",\n          });\n        }\n      } catch (error) {\n        console.error(\"Error fetching absen status:\", error);\n      }\n    };\n\n    checkAbsen();\n  }, []);\n\n  // Update current time every second\n  useEffect(() => {\n    const updateClock = () => {\n      const now = new Date();\n      setCurrentTime({\n        hours: now.getHours(),\n        minutes: now.getMinutes(),\n        seconds: now.getSeconds()\n      });\n    };\n\n    updateClock();\n    const intervalId = setInterval(updateClock, 1000);\n\n    return () => clearInterval(intervalId);\n  }, []);\n\n  // Enumerate video devices and set the default device\n  useEffect(() => {\n    navigator.mediaDevices.enumerateDevices().then((deviceInfos) => {\n      const videoDevices = deviceInfos.filter(\n        (device) => device.kind === \"videoinput\"\n      );\n      setDevices(videoDevices);\n      if (videoDevices.length > 0) {\n        setSelectedDeviceId(videoDevices[0].deviceId);\n      }\n    });\n  }, []);\n\n  // Start the camera when modal is shown\n  useEffect(() => {\n    if (showModal) {\n      startCamera();\n    }\n  }, [showModal, selectedDeviceId]);\n\n  // Reverse geocode to get the address from latitude and longitude\n  const reverseGeocode = async (latitude, longitude) => {\n    try {\n      const response = await axios.get(\n        `https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json`\n      );\n      return response.data.display_name;\n    } catch (error) {\n      return \"Alamat tidak ditemukan\";\n    }\n  };\n\n  // Handle getting the user's location\n  const handleGetLocation = async () => {\n    if (isAlreadyAbsent) {\n      swal.fire({\n        title: \"Sudah Absen\",\n        text: \"Anda sudah absen masuk dan pulang hari ini.\",\n        icon: \"info\",\n        confirmButtonText: \"OK\",\n      });\n      return; // Stop further execution if already absent\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const lat = position.coords.latitude;\n          const lon = position.coords.longitude;\n          const address = await reverseGeocode(lat, lon);\n          setLocation({ latitude: lat, longitude: lon });\n\n          // Update state\n          setShowModal(true);\n\n          // Log state after change\n        },\n        (error) => {\n          toast.error(\n            \"Tidak dapat mengakses lokasi. Pastikan Anda memberi izin.\"\n          );\n        }\n      );\n    } else {\n      toast.error(\"Geolocation tidak didukung oleh browser ini.\");\n    }\n  };\n\n  // Start the camera for capturing photo\n// Start the camera for capturing photo\nconst startCamera = () => {\n  navigator.mediaDevices\n    .getUserMedia({ video: { deviceId: selectedDeviceId } })\n    .then((stream) => {\n      const video = videoRef.current;\n      video.srcObject = stream;\n      video.onloadedmetadata = () => {\n        video.play();\n\n        // Set canvas size to match the video stream's actual dimensions\n        canvasRef.current.width = video.videoWidth;\n        canvasRef.current.height = video.videoHeight;\n      };\n    })\n    .catch((err) => {\n      toast.error(\n        \"Tidak dapat mengakses kamera. Pastikan Anda memberi izin.\"\n      );\n    });\n};\n\n// Capture the photo from the video stream\nconst handleCapturePhoto = () => {\n  const video = videoRef.current;\n  const context = canvasRef.current.getContext(\"2d\");\n\n  // Draw the video stream into the canvas using its natural dimensions\n  context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n  \n  // Convert the canvas content to a data URL\n  const dataUrl = canvasRef.current.toDataURL(\"image/jpeg\");\n  setPhoto(dataUrl);\n};\n\n\n  // Format date to YYYY-MM-DD\n  const formatDate = (date) => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, \"0\");\n    const day = String(date.getDate()).padStart(2, \"0\");\n    return `${year}-${month}-${day}`;\n  };\n\n  // Handle submission of the attendance form\n  const handleSubmit = async () => {\n    \n\n    const result = await swal.fire({\n      title: \"Absen\",\n      text: \"Apakah Anda yakin ingin absen?\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Ya, absen!\"\n    });\n\n    if (result.isConfirmed) {\n      const now = new Date();\n      const formData = new FormData();\n      formData.append(\"date\", formatDate(now));\n      formData.append(\n        \"time\",\n        formatTime(currentTime.hours, currentTime.minutes, currentTime.seconds)\n      );\n      formData.append(\"absenceReason\", \"hadir\");\n      formData.append(\"longitude\", location ? location.longitude : null);\n      formData.append(\"latitude\", location ? location.latitude : null);\n\n      if (photo) {\n        const base64Data = photo.split(\",\")[1];\n        const byteCharacters = atob(base64Data);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        const blob = new Blob([byteArray], { type: \"image/jpeg\" });\n        formData.append(\"image\", blob, \"photo.jpg\");\n      }\n\n      try {\n        const apiUrl = \"/admin/absence\";\n        const response = await Api.post(apiUrl, formData, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n\n        toast.success(response.data.message, {\n          position: \"top-right\",\n          duration: 4000\n        });\n\n        clearForm();\n        setShowModal(false);\n      } catch (error) {\n        const errorMessage = error.response?.data?.error || error.message;\n        \n\n        toast.error(`Gagal melakukan absen. ${errorMessage}`, {\n          position: \"top-right\",\n          duration: 4000\n        });\n      }\n    }\n  };\n\n  // Format time to HH:MM:SS\n  const formatTime = (hours, minutes, seconds) => {\n    return `${String(hours).padStart(2, \"0\")}:${String(minutes).padStart(\n      2,\n      \"0\"\n    )}:${String(seconds).padStart(2, \"0\")}`;\n  };\n\n  // Reset the camera to capture a new photo\n  const handleResetCamera = () => {\n    setPhoto(null);\n    startCamera();\n  };\n\n  useEffect(() => {\n  }, [isAlreadyAbsent]);\n  \n\n  // Clear the form after submission\n  const clearForm = () => {\n    setLocation(null);\n    setPhoto(null);\n  };\n\n  return (\n    <div className=\"card-body mx-auto bg-base-100 h-100 rounded-xl text-center mt-[90px] mb-[80px] md:mt-[100px] md:h-[500px] md:w-1/3\">\n      <h1 className=\"text-2xl font-bold  md:text-3xl   md:mt-5 text-black font-poppins dark:text-white\">\n        Absensi Siswa PKL\n      </h1>\n      <p className=\"text-sm md:text-xl font-semibold md:mt-[-10px] mt-0 mb-3\">\n  {isAlreadyAbsent\n    ? \"Anda sudah absen masuk dan pulang\"\n    : absenceType === \"Masuk\"\n    ? \"Silahkan Absen Masuk\"\n    : \"Silahkan Absen Pulang\"}\n</p>\n\n\n      {/* Tombol akan dinonaktifkan jika sudah absen */}\n      <button\n        onClick={handleGetLocation}\n        // Nonaktifkan tombol jika sudah absen penuh\n        className={`p-2 ${isAlreadyAbsent ? 'bg-gray-500 hover:bg-gray-700' : 'bg-green-500 hover:bg-green-700'} ${absenceType === 'Pulang' ? 'bg-yellow-500 hover:bg-yellow-700' : 'bg-green-500 hover:bg-green-700'} text-white h-[150px] w-[150px] mx-auto rounded-full md:mt-5 md:h-[200px] md:w-[180px]`}\n      >\n        <i className=\"fa-solid fa-bell text-5xl md:text-7xl text-center\"></i>\n      </button>\n\n    \n\n<div className=\"flex justify-center mt-6\">\n  <div className=\"flex items-center p-2  text-black-500  dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-lg \">\n    <span className=\"font-poppins md:text-3xl text-2xl tracking-widest transition-transform duration-300 ease-in-out transform hover:scale-110\">\n      {currentTime.hours.toString().padStart(2, \"0\")}\n    </span>\n    <span className=\"font-poppins md:text-3xl text-2xl mx-1\">:</span>\n    <span className=\"font-poppins md:text-3xl text-2xl tracking-widest transition-transform duration-300 ease-in-out transform hover:scale-110\">\n      {currentTime.minutes.toString().padStart(2, \"0\")}\n    </span>\n    <span className=\"font-poppins md:text-3xl text-2xl mx-1\">:</span>\n    <span className=\"font-poppins md:text-3xl text-2xl tracking-widest transition-transform duration-300 ease-in-out transform hover:scale-110\">\n      {currentTime.seconds.toString().padStart(2, \"0\")}\n    </span>\n    <span className=\"font-poppins md:text-3xl text-2xl ml-2\">\n      WIB\n    </span>\n  </div>\n</div>\n\n\n\n\n      <Link\n        className=\"btn bg-green-500 hover:bg-green-700 mt-6 text-white mx-auto\"\n        to=\"/app/rekap-absensi\"\n      >\n        {\" \"}\n        Riwayat Absen\n      </Link>\n\n      {showModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-[#1c2229] p-6 rounded-lg shadow-lg w-11/12 md:w-1/3 relative\">\n            <button\n              onClick={() => setShowModal(false)}\n              className=\"absolute top-2 right-2 text-gray-600 hover:text-gray-400 text-2xl cursor-pointer\"\n            >\n              âœ•\n            </button>\n            <h2 className=\"font-bold text-lg md:text-3xl dark:text-white\">Absen Siswa PKL</h2>\n            <p className=\"text-lg font-semibold mb-4\">\n  {isAlreadyAbsent\n    ? \"Anda sudah absen masuk dan pulang\"\n    : absenceType === \"Masuk\"\n    ? \"Silahkan Absen Masuk\"\n    : \"Silahkan Absen Pulang\"}\n</p>\n            <label htmlFor=\"camera-select\" className=\"block mt-4 dark:text-white\">\n              Pilih Kamera:\n            </label>\n            <select\n              id=\"camera-select\"\n              className=\"mt-2 p-2 bg-gray-100 text-black-100 dark:bg-gray-700  rounded-md cursor-pointer\"\n              onChange={(e) => setSelectedDeviceId(e.target.value)}\n              value={selectedDeviceId}\n            >\n              {devices.map((device) => (\n                <option key={device.deviceId} value={device.deviceId}>\n                  {device.label || `Camera ${devices.indexOf(device) + 1}`}\n                </option>\n              ))}\n            </select>\n\n            {photo ? (\n              <>\n                <img\n                  src={photo}\n                  alt=\"Preview\"\n                  className=\"mt-4 w-full h-auto mx-auto cursor-pointer object-cover\"\n                />\n                <button\n                  onClick={handleResetCamera}\n                  className=\"mt-4 p-2 bg-gray-100 dark:bg-gray-700 text-black-100 text-1xl rounded-md shadow-md\"\n                >\n                  {photo ? \"Ambil Ulang\" : \"Ambil Foto\"}\n                  <i className=\"fa-solid fa-camera ml-2\"></i>\n                </button>\n              </>\n            ) : (\n              <>\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  style={{ width: \"100%\" }}\n                  className=\"mt-4 w-full h-auto mx-auto object-cover cursor-pointer\"\n                ></video>\n                <button\n                  onClick={handleCapturePhoto}\n                  className=\"mt-4 p-2 bg-gray-100 text-black-100 text-1xl rounded-md shadow-md dark:bg-gray-700\"\n                >\n                  {photo ? \"Ambil Ulang\" : \"Ambil Foto\"}\n                  <i className=\"fa-solid fa-camera ml-2\"></i>\n                </button>\n                <canvas ref={canvasRef} className=\"hidden\" width={640} height={480}></canvas>\n              </>\n            )}\n            <div className=\"flex justify-center\">\n              <button\n                onClick={handleSubmit}\n                className=\"mt-4 p-2 bg-blue-500 text-white rounded-md w-[200px] md:text-xl md:hover:bg-blue-700\"\n              >\n                Absen\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default AbsenceForm;\n","import { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { setPageTitle } from '../../features/common/headerSlice'\nimport Absen from '../../features/Absen/Index'\n\nfunction InternalPage(){\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(setPageTitle({ title : \"Absen\"}))\n      }, [])\n\n\n    return(\n        <Absen />\n    )\n}\n\nexport default InternalPage"],"names":["AbsenceForm","location","setLocation","useState","photo","setPhoto","showModal","setShowModal","currentTime","setCurrentTime","hours","minutes","seconds","devices","setDevices","selectedDeviceId","setSelectedDeviceId","absenceType","setAbsenceType","isAlreadyAbsent","setIsAlreadyAbsent","videoRef","useRef","canvasRef","token","Cookies","get","useEffect","async","data","Api","headers","Authorization","message","swal","title","text","icon","confirmButtonText","error","console","checkAbsen","updateClock","now","Date","getHours","getMinutes","getSeconds","intervalId","setInterval","clearInterval","navigator","mediaDevices","enumerateDevices","then","deviceInfos","videoDevices","filter","device","kind","length","deviceId","startCamera","getUserMedia","video","stream","current","srcObject","onloadedmetadata","play","width","videoWidth","height","videoHeight","catch","err","toast","formatTime","String","padStart","clearForm","_jsxs","className","children","_jsx","onClick","geolocation","getCurrentPosition","lat","position","coords","latitude","lon","longitude","axios","display_name","reverseGeocode","toString","Link","to","htmlFor","id","onChange","e","target","value","map","label","indexOf","_Fragment","src","alt","handleResetCamera","ref","autoPlay","style","handleCapturePhoto","getContext","drawImage","dataUrl","toDataURL","showCancelButton","confirmButtonColor","cancelButtonColor","isConfirmed","formData","FormData","append","date","getFullYear","getMonth","getDate","base64Data","split","byteCharacters","atob","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","blob","Blob","type","apiUrl","response","post","success","duration","_error$response","_error$response$data","errorMessage","ToastContainer","dispatch","useDispatch","setPageTitle","Absen"],"sourceRoot":""}