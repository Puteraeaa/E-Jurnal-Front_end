"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[622],{5622:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(7565),l=a(3292),o=a(4963),n=a(896),s=a(6709),i=a(8758),d=a(7850),c=(a(6804),a(7929));const u=()=>{const[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(""),[o,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),p=n.A.get("token"),x=async()=>{try{const e=(await s.A.get("/admin/panduan",{headers:{Authorization:`Bearer ${p}`}})).data.data.last_page,t=(await s.A.get(`/admin/panduan?page=${e}`,{headers:{Authorization:`Bearer ${p}`}})).data.data.data[0];h(t.dokumen),console.log("Latest PDF URL:",t.dokumen)}catch(e){console.error("Error fetching PDF:",e.message),d.oR.error("Error fetching PDF.",{position:"top-right",duration:4e3})}};(0,r.useEffect)((()=>{x()}),[]);const f=()=>{u(!o)};return(0,c.jsxs)("div",{className:"relative h-screen flex flex-col bg-gray-100",children:[(0,c.jsx)(d.N9,{}),(0,c.jsx)("div",{className:"flex-grow relative p-4",children:g?(0,c.jsx)("iframe",{src:`${g}`,title:"Panduan PKL",className:"w-full h-full",style:{border:"none",height:"90vh"},onContextMenu:e=>e.preventDefault()}):(0,c.jsx)("p",{className:"text-center text-gray-500",children:"Loading PDF..."})}),(0,i.A)(["siswa.delete"])&&(0,c.jsx)("button",{onClick:f,className:"fixed bottom-4 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition duration-300",children:"Upload File"}),o&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Upload File Panduan:"}),(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)("input",{type:"file",onChange:e=>{const a=e.target.files[0];t(a),l(a?a.name:"")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border file:border-gray-300 file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200"})}),a&&(0,c.jsxs)("div",{className:"mb-4 p-4 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:[(0,c.jsx)("p",{className:"text-lg font-medium",children:"File Selected:"}),(0,c.jsx)("p",{children:a})]}),(0,c.jsx)("button",{onClick:async()=>{if(e){const r=new FormData;r.append("dokumen",e),r.append("user_id",1);try{await s.A.post("/admin/panduan",r,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"multipart/form-data"}});l(""),t(null),f(),d.oR.success("File uploaded successfully!",{position:"top-right",duration:4e3}),x()}catch(a){console.error("Error uploading file:",a.response),d.oR.error("Error uploading file.",{position:"top-right",duration:4e3})}}else console.log("No file selected"),d.oR.error("No file selected.",{position:"top-right",duration:4e3})},className:"bg-blue-500 w-[100px] text-white px-6 py-3 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300 mr-4 ml-[300px] text-lg",children:"Upload"}),(0,c.jsx)("button",{onClick:f,className:"mt-2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-red-600 transition duration-300 w-[100px] text-lg",children:"Close"})]})})]})};const g=function(){const e=(0,l.wA)();return(0,r.useEffect)((()=>{e((0,o.wE)({title:"Panduan PKL"}))}),[]),(0,c.jsx)(u,{})}},6804:()=>{}}]);
//# sourceMappingURL=622.e05168b7.chunk.js.map