"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[67],{9067:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(7565),l=a(3292),r=a(4963),d=a(6709),c=a(896),n=a(7850),i=(a(6804),a(8758)),o=(a(6400),a(5963),a(9930)),u=a.n(o),b=a(7929);delete u().Icon.Default.prototype._getIconUrl,u().Icon.Default.mergeOptions({iconRetinaUrl:a(8249),iconUrl:a(7024),shadowUrl:a(1071)});const m=()=>{const[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(null),[r,o]=(0,s.useState)(1),[u,m]=(0,s.useState)(1),[h,x]=(0,s.useState)([]),[g,p]=(0,s.useState)("check-in"),[k,A]=(0,s.useState)("check-in"),N=c.A.get("token"),f=JSON.parse(c.A.get("user")).roles,w=async e=>{try{var a,s,l;let r="";r="siswa"===f?`/admin/absenSiswaOnly?page=${e}&limit=10`:"guru"===f||"orang tua"===f||"industri"===f?`/admin/absenSiswa?page=${e}&limit=10`:`/admin/absence?page=${e}&limit=10`;const c=await d.A.get(r,{headers:{Authorization:`Bearer ${N}`}}),n=(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.data)||[];if("object"===typeof n){const e=(e=>Object.values(e).map((e=>{var t,a,s,l;const r=(null===(t=e.entries.Masuk)||void 0===t?void 0:t.entries[0])||{},d=(null===(a=e.entries.Pulang)||void 0===a?void 0:a.entries[0])||{};return{date:e.date?`${["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"][new Date(e.date).getDay()]||""}, ${e.date}`:"-",name:(null===(s=r.users.students)||void 0===s?void 0:s.name)||(null===(l=r.users)||void 0===l?void 0:l.name)||"-",statusMasuk:r.status||"-",statusPulang:d.status||"-",arrivalTime:r.departureTime?r.departureTime+" WIB":"Belum Absen Masuk",departureTime:d.departureTime?d.departureTime+" WIB":"Belum Absen Keluar",arrivalImage:r.image||"",departureImage:d.image||"",latitudeMasuk:r.latitude||null,longitudeMasuk:r.longitude||null,latitudePulang:d.latitude||null,longitudePulang:d.longitude||null,status:r.absenceReason||null}})))(n);t(e)}else t([]);m((null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.totalPages)||1),x((null===c||void 0===c||null===(l=c.data)||void 0===l?void 0:l.links)||[])}catch(r){n.oR.error("Failed to fetch attendance records")}};(0,s.useEffect)((()=>{w(r)}),[r]);const j=e=>{const t=new URLSearchParams(e.split("?")[1]).get("page");t&&o(parseInt(t,10))};return(0,b.jsxs)("div",{className:"container mx-auto mt-5 px-4 md:mt-10 md:px-8 mb-[400px]",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center md:text-3xl",children:"Rekap Absensi"}),(0,b.jsxs)("div",{className:"overflow-x-auto w-full",children:[(0,b.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 dark:text-white dark:bg-[#1c2229]",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-200 text-gray-700",children:[(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"No"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Tanggal"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Nama"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Status"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Waktu Masuk"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Waktu Keluar"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Photo"}),(0,b.jsx)("th",{className:"py-4 px-6 border-b text-center",children:"Action"})]})}),(0,b.jsx)("tbody",{children:e.length>0?e.map(((e,t)=>(0,b.jsxs)("tr",{className:"h-20",children:[(0,b.jsx)("td",{className:"py-4 px-6 border-b text-center",children:10*(r-1)+t+1}),(0,b.jsx)("td",{className:"md:py-4 md:px-6 border-b text-center whitespace-normal break-words ",children:e.date}),(0,b.jsx)("td",{className:"py-4 px-6 border-b text-center whitespace-normal break-words",children:e.name}),(0,b.jsx)("td",{className:"py-4 px-6 border-b text-center whitespace-normal break-words",children:e.status}),(0,b.jsx)("td",{className:"py-4 px-6 border-b text-center whitespace-normal break-words",children:e.arrivalTime}),(0,b.jsx)("td",{className:"py-4 px-6 border-b text-center whitespace-normal break-words",children:e.departureTime}),(0,b.jsx)("td",{className:"py-4 px-6 border-b text-center whitespace-normal break-words",children:(0,b.jsx)("img",{src:e.arrivalImage||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Attendance",className:"w-16 h-16 object-cover mx-auto cursor-pointer rounded-full",onClick:()=>{l(e),document.getElementById("my_modal_3").showModal()}})}),(0,b.jsxs)("td",{className:"py-4 px-6 border-b text-center whitespace-normal break-words",children:[(0,b.jsx)("button",{className:"btn btn-primary btn-sm pl-2",onClick:()=>{l(e),document.getElementById("my_modal_maps").showModal()},children:"Lihat Posisi"}),(0,i.A)(["siswa.delete"])&&(0,b.jsx)("button",{className:"btn bg-green-500 btn-sm md:ml-2 mt-2",children:"Verifikasi"})]})]},t))):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"7",className:"py-4 px-6 text-center",children:"No records found"})})})]}),(0,b.jsx)("dialog",{id:"my_modal_3",className:"modal",children:(0,b.jsxs)("div",{className:"modal-box",children:[(0,b.jsx)("form",{method:"dialog",children:(0,b.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"\u2715"})}),(0,b.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Absensi"}),(0,b.jsxs)("div",{className:"tabs",children:[(0,b.jsx)("a",{className:"tab tab-lifted "+("check-in"===k?"tab-active border-b-2 border-blue-500":""),onClick:()=>{A("check-in"),p("check-in")},children:"Masuk"}),(0,b.jsx)("a",{className:"tab tab-lifted "+("check-out"===k?"tab-active border-b-2 border-blue-500":""),onClick:()=>{A("check-out"),p("check-out")},children:"Pulang"})]}),(0,b.jsx)("div",{className:"mt-4",children:"check-out"!==g||null!==a&&void 0!==a&&a.departureImage?(0,b.jsx)("img",{src:"check-in"===g?null===a||void 0===a?void 0:a.arrivalImage:null===a||void 0===a?void 0:a.departureImage,alt:"Attendance",className:"w-full h-auto object-cover"}):(0,b.jsx)("p",{className:"text-red-500",children:"Belum Absen Pulang"})})]})}),(0,b.jsx)("dialog",{id:"my_modal_maps",className:"modal",children:(0,b.jsxs)("div",{className:"modal-box",children:[(0,b.jsx)("form",{method:"dialog",children:(0,b.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"\u2715"})}),(0,b.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Lokasi Absen"}),(0,b.jsxs)("div",{className:"tabs",children:[(0,b.jsx)("a",{className:"tab tab-lifted "+("check-in"===k?"tab-active border-b-2 border-blue-500":""),onClick:()=>A("check-in"),children:"Masuk"}),(0,b.jsx)("a",{className:"tab tab-lifted "+("check-out"===k?"tab-active border-b-2 border-blue-500":""),onClick:()=>A("check-out"),children:"Pulang"})]}),(0,b.jsx)("div",{className:"w-full h-80",children:"check-out"!==k||null!==a&&void 0!==a&&a.latitudePulang&&null!==a&&void 0!==a&&a.longitudePulang?(0,b.jsx)("iframe",{src:"check-in"===k?`https://www.google.com/maps?q=${null===a||void 0===a?void 0:a.latitudeMasuk},${null===a||void 0===a?void 0:a.longitudeMasuk}&output=embed`:`https://www.google.com/maps?q=${null===a||void 0===a?void 0:a.latitudePulang},${null===a||void 0===a?void 0:a.longitudePulang}&output=embed`,width:"100%",height:"100%",frameBorder:"0",style:{border:0},allowFullScreen:"","aria-hidden":"false",tabIndex:"0"}):(0,b.jsx)("p",{className:"text-red-500 font-bold text-center mt-8",children:"Anda belum absen pulang, peta tidak dapat ditampilkan."})})]})})]}),(0,b.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,b.jsx)("button",{className:"btn btn-primary btn-sm",disabled:1===r,onClick:()=>j(h.prev),children:"Previous"}),(0,b.jsx)("button",{className:"btn btn-primary btn-sm",disabled:r===u,onClick:()=>j(h.next),children:"Next"})]}),(0,b.jsx)(n.N9,{})]})};const h=function(){const e=(0,l.wA)();return(0,s.useEffect)((()=>{e((0,r.wE)({title:"Rekap Absen"}))}),[]),(0,b.jsx)(m,{})}},6804:()=>{},8249:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcY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"},7024:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},1071:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},6400:(e,t,a)=>{a.d(t,{Po:()=>d,ko:()=>r});var s=a(7143),l=a(7565);function r(){return(0,s.U$)().map}function d(e){const t=r();return(0,l.useEffect)((function(){return t.on(e),function(){t.off(e)}}),[t,e]),t}}}]);
//# sourceMappingURL=67.5b9cbd16.chunk.js.map