"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[939],{4939:(e,a,r)=>{r.r(a),r.d(a,{default:()=>m});var s=r(7565),o=r(3292),l=r(4963),t=r(1030),n=r(6709),d=r(896),i=r(1918),c=r(7929);const u=d.A.get("token"),b=JSON.parse(d.A.get("user"));console.log("p",b);const p=()=>{const e=(0,t.Zp)(),[a,r]=(0,s.useState)(null),{id:o}=(0,t.g)(),[l,d]=(0,s.useState)({user_id:"",name:"",nis:"",placeOfBirth:"",dateOfBirth:"",gender:"",bloodType:"",alamat:"",image:null,classes_id:"",industri_id:"",departemen_id:"",parents_id:"",teacher_id:""});(0,s.useEffect)((()=>{(async()=>{const e=b.id;try{const a=(await n.A.get(`admin/users/${e}`,{headers:{Authorization:`Bearer ${u}`}})).data.data.student;r(a.user_id),console.log(a),d({user_id:a.user_id||"",name:a.name||"",nis:a.nis||"",placeOfBirth:a.placeOfBirth||"",dateOfBirth:a.dateOfBirth||"",gender:a.gender||"",bloodType:a.bloodType||"",alamat:a.alamat||"",image:null,classes_id:a.classes_id||"",industri_id:a.industri_id||"",departemen_id:a.departemen_id||"",parents_id:a.parents_id||"",teacher_id:a.teacher_id||"",roles:"siswa"})}catch(a){console.error("Error fetching student data:",a),i.oR.error("Failed to load student data.",{position:"top-right",duration:4e3})}})()}),[o]);const p=e=>{const{name:a,value:r,type:s,files:o}=e.target;d((e=>({...e,[a]:"file"===s?o[0]:r})))};return(0,c.jsx)("div",{className:"container mx-auto my-10 px-4",children:(0,c.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Edit Data Siswa"}),(0,c.jsx)("p",{className:"text-center border-b pb-4 mb-4",children:"Silakan update form di bawah!"}),(0,c.jsxs)("form",{onSubmit:async r=>{b.id;r.preventDefault(),console.log("Form data to be submitted:",l);try{await n.A.put(`admin/users/${a}`,l,{headers:{Authorization:`Bearer ${u}`}}),i.oR.success("Lead updated successfully!",{position:"top-right",duration:4e3}),e("/app/settings-profile")}catch(s){if(s.response){console.error("Error response data:",s.response.data);const e=s.response.data.errors;if(e){for(const[a,r]of Object.entries(e))console.error(`Field: ${a}, Errors: ${r.join(", ")}`);i.oR.error(`Failed to update lead: ${Object.values(e)[0][0]}`,{position:"top-right",duration:4e3})}else i.oR.error(`Failed to update lead: ${s.response.data.message||"Please check the form fields."}`,{position:"top-right",duration:4e3})}else console.error("Error updating lead:",s),i.oR.error("Failed to update lead.",{position:"top-right",duration:4e3})}},children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Nama Siswa"}),(0,c.jsx)("input",{type:"text",name:"name",value:l.name,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"NIS"}),(0,c.jsx)("input",{type:"text",name:"nis",value:l.nis,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tempat Lahir"}),(0,c.jsx)("input",{type:"text",name:"placeOfBirth",value:l.placeOfBirth,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tanggal Lahir"}),(0,c.jsx)("input",{type:"date",name:"dateOfBirth",value:l.dateOfBirth,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Jenis Kelamin"}),(0,c.jsxs)("select",{name:"gender",value:l.gender,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,c.jsx)("option",{value:"",children:"Pilih Jenis Kelamin"}),(0,c.jsx)("option",{value:"male",children:"Laki-Laki"}),(0,c.jsx)("option",{value:"female",children:"Perempuan"})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Golongan Darah"}),(0,c.jsxs)("select",{name:"bloodType",value:l.bloodType,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,c.jsx)("option",{value:"",children:"Pilih Golongan Darah"}),(0,c.jsx)("option",{value:"A",children:"A"}),(0,c.jsx)("option",{value:"B",children:"B"}),(0,c.jsx)("option",{value:"AB",children:"AB"}),(0,c.jsx)("option",{value:"O",children:"O"})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Alamat"}),(0,c.jsx)("textarea",{name:"alamat",value:l.alamat,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,c.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:bg-blue-600",children:"Update"})]})]})})};const m=function(){const e=(0,o.wA)();return(0,s.useEffect)((()=>{e((0,l.wE)({title:"Settings"}))}),[]),(0,c.jsx)(p,{})}}}]);
//# sourceMappingURL=939.77918259.chunk.js.map