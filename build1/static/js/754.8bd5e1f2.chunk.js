"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[754],{4754:(e,a,s)=>{s.r(a),s.d(a,{default:()=>i});var r=s(7565),l=s(1030),o=s(6709),n=s(896),t=s(1918),d=s(7929);const i=()=>{const[e,a]=(0,r.useState)({roles:"siswa",username:"",password:"",password_confirmation:"",name:"",nis:"",placeOfBirth:"",dateOfBirth:"",gender:"",bloodType:"",alamat:"",image:null,classes_id:"",industri_id:"",departemen_id:"",parents_id:"",teacher_id:""}),[s,i]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[b,m]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[x,f]=(0,r.useState)([]),[g,y]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),N=(0,l.Zp)(),w=e=>{const{name:s,value:r,type:l,files:o}=e.target;a((e=>({...e,[s]:"file"===l?o[0]:r})))};(0,r.useEffect)((()=>{(async()=>{try{const e=await o.A.get("admin/parent",{headers:{Authorization:`Bearer ${n.A.get("token")}`}});m(e.data.data.data||[])}catch(e){console.error("Error fetching parents data:",e)}})(),(async()=>{try{const e=await o.A.get("admin/industri",{headers:{Authorization:`Bearer ${n.A.get("token")}`}});h(e.data.data.data||[])}catch(e){console.error("Error fetching industries data:",e)}})(),(async()=>{try{const e=await o.A.get("admin/departemen",{headers:{Authorization:`Bearer ${n.A.get("token")}`}});f(e.data.data.data||[])}catch(e){console.error("Error fetching departments data:",e)}})(),(async()=>{try{const e=await o.A.get("admin/classes",{headers:{Authorization:`Bearer ${n.A.get("token")}`}});y(e.data.data.data||[])}catch(e){console.error("Error fetching classes data:",e)}})(),(async()=>{try{const e=await o.A.get("admin/teacher",{headers:{Authorization:`Bearer ${n.A.get("token")}`}});v(e.data.data.data||[])}catch(e){console.error("Error fetching teachers data:",e)}})()}),[]);const k=()=>{i((e=>!e))};return(0,d.jsx)("div",{className:"container mx-auto my-10 px-4",children:(0,d.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 border-t-4 border-blue-500",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Tambah Data Siswa"}),(0,d.jsx)("p",{className:"text-center border-b pb-4 mb-4",children:"Silakan isi form di bawah!"}),(0,d.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),e.password.trim()===e.password_confirmation.trim()){u(!0);try{const a=new FormData;Object.keys(e).forEach((s=>{"password_confirmation"!==s&&a.append(s,e[s])})),a.append("password_confirmation",e.password_confirmation),await o.A.post("admin/users",a,{headers:{Authorization:`Bearer ${n.A.get("token")}`,"Content-Type":"multipart/form-data"}}),t.oR.success("Student added successfully!",{position:"top-right",duration:4e3}),N("/app/data/siswa")}catch(s){if(s.response){const e=s.response.data.errors;e?t.oR.error(`Failed to add student: ${Object.values(e)[0][0]}`,{position:"top-right",duration:4e3}):t.oR.error(`Failed to add student: ${s.response.data.message||"Please check the form fields."}`,{position:"top-right",duration:4e3})}else t.oR.error("Failed to add student.",{position:"top-right",duration:4e3})}finally{u(!1)}}else t.oR.error("Password dan konfirmasi password tidak cocok.",{position:"top-right",duration:4e3})},children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Nama Siswa"}),(0,d.jsx)("input",{type:"text",name:"name",value:e.name,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"username"}),(0,d.jsx)("input",{type:"text",name:"username",value:e.username,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4 relative",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Password"}),(0,d.jsx)("input",{type:s?"text":"password",name:"password",value:e.password,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0}),(0,d.jsx)("button",{type:"button",onClick:k,className:"absolute right-3 top-3 text-gray-500",children:s?(0,d.jsx)("i",{class:"fa-solid fa-eye-slash"}):(0,d.jsx)("i",{class:"fa-solid fa-eye"})})]}),(0,d.jsxs)("div",{className:"mb-4 relative",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Password Confirmation"}),(0,d.jsx)("input",{type:s?"text":"password",name:"password_confirmation",value:e.password_confirmation,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0}),(0,d.jsx)("button",{type:"button",onClick:k,className:"absolute right-3 top-3 text-gray-500",children:s?(0,d.jsx)("i",{class:"fa-solid fa-eye-slash"}):(0,d.jsx)("i",{class:"fa-solid fa-eye"})})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"NIS"}),(0,d.jsx)("input",{type:"number",name:"nis",value:e.nis,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tempat Lahir"}),(0,d.jsx)("input",{type:"text",name:"placeOfBirth",value:e.placeOfBirth,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Tanggal Lahir"}),(0,d.jsx)("input",{type:"date",name:"dateOfBirth",value:e.dateOfBirth,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Jenis Kelamin"}),(0,d.jsxs)("select",{name:"gender",value:e.gender,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Pilih jenis kelamin"}),(0,d.jsx)("option",{value:"Laki-laki",children:"Laki-laki"}),(0,d.jsx)("option",{value:"Perempuan",children:"Perempuan"})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Golongan Darah"}),(0,d.jsxs)("select",{name:"bloodType",value:e.bloodType,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Pilih golongan darah"}),(0,d.jsx)("option",{value:"A",children:"A"}),(0,d.jsx)("option",{value:"B",children:"B"}),(0,d.jsx)("option",{value:"AB",children:"AB"}),(0,d.jsx)("option",{value:"O",children:"O"})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Alamat"}),(0,d.jsx)("input",{type:"text",name:"alamat",value:e.alamat,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Foto Profil"}),(0,d.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Orang Tua/Wali"}),(0,d.jsxs)("select",{name:"parents_id",value:e.parents_id,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[(0,d.jsx)("option",{value:"",children:"Pilih Orang Tua/Wali"}),b.map((e=>(0,d.jsx)("option",{value:e.id,children:e.nama},e.id)))]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Industri"}),(0,d.jsxs)("select",{name:"industri_id",value:e.industri_id,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[(0,d.jsx)("option",{value:"",children:"Pilih Industri"}),p.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Departemen"}),(0,d.jsxs)("select",{name:"departemen_id",value:e.departemen_id,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[(0,d.jsx)("option",{value:"",children:"Pilih Departemen"}),x.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Kelas"}),(0,d.jsxs)("select",{name:"classes_id",value:e.classes_id,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[(0,d.jsx)("option",{value:"",children:"Pilih Kelas"}),g.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Pembimbing"}),(0,d.jsxs)("select",{name:"teacher_id",value:e.teacher_id,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[(0,d.jsx)("option",{value:"",children:"Pilih Pembimbing"}),j.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsx)("div",{className:"flex justify-end mt-6",children:(0,d.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",disabled:c,children:c?"Menyimpan...":"Simpan"})})]})]})})}}}]);
//# sourceMappingURL=754.8bd5e1f2.chunk.js.map