"use strict";(self.webpackChunke_jurnal=self.webpackChunke_jurnal||[]).push([[341],{341:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(7565),r=t(3292),d=t(4963),l=t(1030),i=t(477),n=t(6709),c=t(896),x=t(8758),o=t(7929);function m(){return(0,o.jsxs)("tr",{className:"bg-gray-300 animate-pulse",children:[(0,o.jsx)("td",{className:"p-4",children:(0,o.jsx)("div",{className:"bg-gray-400 h-6 w-32 rounded"})}),(0,o.jsx)("td",{className:"p-4",children:(0,o.jsx)("div",{className:"bg-gray-400 h-4 w-24 rounded"})}),(0,o.jsx)("td",{className:"p-4",children:(0,o.jsx)("div",{className:"bg-gray-400 h-4 w-24 rounded"})}),(0,o.jsx)("td",{className:"p-4",children:(0,o.jsx)("div",{className:"bg-gray-400 h-4 w-32 rounded"})}),(0,o.jsx)("td",{className:"p-4",children:(0,o.jsx)("div",{className:"bg-gray-400 h-4 w-32 rounded"})})]})}const u=function(){const[e,a]=(0,s.useState)([]),[t,r]=(0,s.useState)(!0),[d,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[g,y]=(0,s.useState)(""),[j,b]=(0,s.useState)([]),[v,N]=(0,s.useState)([]),[w,f]=(0,s.useState)(!1),k=c.A.get("token"),A=JSON.parse(c.A.get("user")),S=(0,l.Zp)();return(0,s.useEffect)((()=>{(async()=>{try{const e=await n.A.get("admin/classes",{headers:{Authorization:`Bearer ${k}`}});b(Array.isArray(e.data.data.data)?e.data.data.data:[])}catch(e){}})(),(async()=>{try{const e=await n.A.get("admin/departemen",{headers:{Authorization:`Bearer ${k}`}});N(Array.isArray(e.data.data.data)?e.data.data.data:[])}catch(e){}})()}),[]),(0,s.useEffect)((()=>{(async()=>{const e=A.roles;try{let t;const s=new URLSearchParams({search:d,departemen_id:g,classes_id:h}).toString();t="siswa"===e?await n.A.get("admin/student-jurnal",{headers:{Authorization:`Bearer ${k}`}}):await n.A.get(`admin/indexRole-jurnal?${s}`,{headers:{Authorization:`Bearer ${k}`}}),a(t.data.data.data||[]),r(!1),console.log(t.data.data)}catch(t){r(!1),console.log(t)}})()}),[d,h,g]),(0,o.jsxs)("div",{className:"container mx-auto p-6",children:[(0,o.jsxs)("div",{className:"bg-white dark:bg-[#1c2229] shadow-md rounded-lg p-6 mb-6",children:[(0,o.jsxs)("p",{className:"border-b pb-2 font-bold text-xl md:text-4xl text-center",children:[(0,o.jsx)("i",{className:"fas fa-chart-pie dark:text-white text-blue-600"})," ","Jurnal Laporan Harian"]}),(0,o.jsxs)("p",{className:"text-gray-600 font-semibold mt-2 dark:text-white text-center text-xs md:text-base",children:["Ini adalah laporan PKL yang dibuat oleh Siswa SMKN 1 Ciomas dari semua"," ",(0,o.jsx)("span",{className:"font-bold"})," kejuruan."]})]}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search",value:d,onChange:e=>u(e.target.value),className:"input w-full max-w-xs input-bordered h-9"}),(0,x.A)(["siswa.delete","penilaian.create"])&&(0,o.jsxs)("button",{onClick:()=>document.getElementById("my_modal_3").showModal(),className:"inline-block bg-blue-500 text-white text-sm font-semibold md:py-1 md:px-2 md:text-base py-1 px-2 rounded hover:bg-blue-600 transition-colors duration-300",children:[(0,o.jsx)("i",{className:"fa-solid fa-filter"})," Filter"]}),(0,x.A)(["murid.index"])&&(0,o.jsxs)(i.N_,{to:"/app/laporan-pkl/tambah",className:"inline-block bg-blue-500 text-white text-sm font-semibold md:py-1 md:px-2 md:text-base py-1 px-2 rounded hover:bg-blue-600 transition-colors duration-300",children:[(0,o.jsx)("i",{className:"fa-solid fa-plus"})," Tambah Laporan"]})]}),(0,o.jsx)("dialog",{id:"my_modal_3",className:"modal",children:(0,o.jsxs)("div",{className:"modal-box",children:[(0,o.jsx)("form",{method:"dialog",children:(0,o.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"\u2715"})}),(0,o.jsx)("h3",{className:"font-bold text-lg",children:"Filter"}),(0,o.jsxs)("div",{className:"mt-4 ",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kelas"}),(0,o.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"select w-full max-w-xs input-bordered h-9",children:[(0,o.jsx)("option",{value:"",children:"Pilih Kelas"}),j.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Jurusan"}),(0,o.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"select w-full max-w-xs input-bordered h-9 mb-4 text-gray-700 dark:text-gray-300",children:[(0,o.jsx)("option",{value:"",children:"Pilih Jurusan"}),v.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]})}),(0,o.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,o.jsxs)("table",{className:"md:w-[100%] w-[400%]  divide-y divide-gray-200 ",children:[(0,o.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-900 dark:text-white",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left  text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider=",children:"Nama"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Tempat PKL"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left  text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Jurusan"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Tanggal"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Deskripsi"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-900 dark:divide-gray-700",children:t?Array(6).fill(0).map(((e,a)=>(0,o.jsx)(m,{},a))):e.length>0?e.map((e=>{var a,t,s,r,d,l,i,n,c,x,m,u,h,p,g,y,j,b;return(0,o.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:bg-gray-800",onClick:()=>{return a=e.id,void S(`/app/detail-laporan/${a}`);var a},children:[(0,o.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 w-[200px]",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("img",{src:null!==(a=null===(t=e.users)||void 0===t||null===(s=t.students)||void 0===s?void 0:s.image)&&void 0!==a?a:"https://picsum.photos/200/300",alt:"Profile Mentor",className:"w-10 h-10 rounded-full border object-cover mr-3"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900 dark:text-white w-[200px]",children:null!==(r=null===(d=e.users.students)||void 0===d?void 0:d.name)&&void 0!==r?r:"-"}),(0,o.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:null!==(l=null===(i=e.users)||void 0===i||null===(n=i.students)||void 0===n||null===(c=n.classes)||void 0===c?void 0:c.name)&&void 0!==l?l:"-"})]})]})}),(0,o.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white w-[200px]",children:null!==(x=null===(m=e.users)||void 0===m||null===(u=m.students)||void 0===u||null===(h=u.industries)||void 0===h?void 0:h.name)&&void 0!==x?x:"-"}),(0,o.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white w-[200px]",children:null!==(p=null===(g=e.users)||void 0===g||null===(y=g.students)||void 0===y||null===(j=y.departements)||void 0===j?void 0:j.name)&&void 0!==p?p:"-"}),(0,o.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 w-[130px]",children:e.date}),(0,o.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 truncate-multiline mb-3",children:(b=e.description,b?b.replace(/<\/?[^>]+(>|$)/g,""):"")})]},e.id)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-600 dark:text-white",children:"No records found."})})})]})})]})};const h=function(){const e=(0,r.wA)();return(0,s.useEffect)((()=>{e((0,d.wE)({title:"Laporan"}))}),[]),(0,o.jsx)(u,{})}}}]);
//# sourceMappingURL=341.e3cbe5f3.chunk.js.map