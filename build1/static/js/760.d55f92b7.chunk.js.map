{"version":3,"file":"static/js/760.d55f92b7.chunk.js","mappings":"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","sources":["api/index.jsx","features/user/Login.js","pages/Login.js"],"sourcesContent":["import axios from 'axios';\nimport Cookies from 'js-cookie';\n\n// Buat instance Axios\nconst Api = axios.create({\n  baseURL: 'https://api.jurnal.pplgsmkn1ciomas.my.id/api',\n  headers: {\n    \"Accept\": \"application/json\",\n    \"Content-Type\": \"application/json\",\n  }\n});\n\n// Counter untuk menghitung jumlah request\nlet requestCount = 0;\n\nApi.interceptors.request.use(request => {\n  requestCount++;\n  console.log(`Total API requests: ${requestCount}`);\n  return request;\n});\n\n\n\nApi.interceptors.response.use(\n  function (response) {\n    return response;\n  },\n  function (error) {\n    if (401 === error.response.status) {\n      Cookies.remove('token');\n      Cookies.remove('user');\n      Cookies.remove('permissions');\n      window.location = '/';\n    } else if (403 === error.response.status) {\n      window.location = '/app/blank';\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default Api;\n","import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\nimport toast from \"react-hot-toast\";\nimport Api from \"../../api\";\nimport schoolLogo from \"../../assets/smk.png\"; // Make sure to import your logo\nimport bgImage from \"../../assets/back.jpg\"; // Import the background image\n\nfunction Login() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check if user is already logged in\n    if (Cookies.get(\"token\")) {\n      navigate(\"/app/dashboard\");\n    }\n  }, [navigate]);\n\n  const checkInternetConnection = () => {\n    return navigator.onLine;\n  };\n\n  const login = async (e) => {\n    e.preventDefault();\n    \n    if (!checkInternetConnection()) {\n      toast.error(\"Tidak ada koneksi internet. Periksa jaringan Anda dan coba lagi.\", {\n        position: \"top-right\",\n        autoClose: 4000,\n      });\n      return;\n    }\n\n    setIsSubmitDisabled(true);\n\n    try {\n      const response = await Api.post(\"/login\", {\n        name: username,\n        password: password,\n      });\n\n      if (response.status === 200) {\n        Cookies.set(\"token\", response.data.token);\n        Cookies.set(\"user\", JSON.stringify(response.data.user));\n        Cookies.set(\"permissions\", JSON.stringify(response.data.permissions));\n\n        toast.success(\"Login Berhasil!\", {\n          position: \"top-right\",\n          autoClose: 4000,\n        });\n\n        navigate(\"/app/dashboard\");\n      } else {\n        toast.error(\"Status respons tidak terduga: \" + response.status, {\n          position: \"top-right\",\n          autoClose: 4000,\n        });\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.message || \"Terjadi kesalahan\";\n      console.error(\"Error Response:\", errorMessage);\n\n      toast.error(errorMessage, {\n        position: \"top-right\",\n        autoClose: 4000,\n      });\n    } finally {\n      setIsSubmitDisabled(false);\n    }\n  };\n\n  if (Cookies.get(\"token\")) {\n    navigate(\"/app/dashboard\");\n    return null;\n  }\n\n  return (\n    <div\n      className=\"min-h-screen flex items-center justify-center bg-cover bg-center p-4\"\n      style={{ backgroundImage: `url(${bgImage})` }} // Set the background image\n    >\n      <div className=\"bg-white bg-opacity-90 rounded-lg shadow-lg overflow-hidden w-full max-w-md\">\n        <div className=\"p-6 space-y-6\">\n          {/* School logo */}\n          <div className=\"text-center\">\n            <img src={schoolLogo} alt=\"SMKN 1 Ciomas Logo\" className=\"w-24 mx-auto\" />\n            <h2 className=\"text-2xl font-bold text-gray-700 mt-4\">\n              E-Jurnal SMKN 1 Ciomas\n            </h2>\n            <p className=\"text-sm text-gray-600 mt-2\">\n              Sistem Digital untuk Praktik Kerja Lapangan\n            </p>\n          </div>\n\n          <form onSubmit={login}>\n            <div className=\"space-y-4\">\n              <div>\n                <label htmlFor=\"username\" className=\"text-sm font-medium text-gray-700\">\n                  Username\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"username\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"Masukkan username\"\n                  className=\"w-full mt-2 p-2 border border-gray-300 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"password\" className=\"text-sm font-medium text-gray-700\">\n                  Password\n                </label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Masukkan password\"\n                  className=\"w-full mt-2 p-2 border border-gray-300 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500\"\n                />\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"w-full mt-6 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-500 focus:ring focus:ring-blue-300\"\n              disabled={isSubmitDisabled}\n            >\n              Login\n            </button>\n          </form>\n\n          {/* <Link\n            to=\"/forgot-password\"\n            className=\"text-sm text-blue-600 hover:underline mt-4 block text-center\"\n          >\n            Lupa Password?\n          </Link> */}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n","import {useState, useRef} from 'react'\nimport {Link} from 'react-router-dom'\nimport Login from '../features/user/Login'\n\nfunction ExternalPage(){\n\n\n    return(\n        <div className=\"\">\n                <Login />\n        </div>\n    )\n}\n\nexport default ExternalPage"],"names":["Api","axios","create","baseURL","headers","requestCount","interceptors","request","use","console","log","response","error","status","Cookies","remove","window","location","Promise","reject","username","setUsername","useState","password","setPassword","isSubmitDisabled","setIsSubmitDisabled","navigate","useNavigate","useEffect","get","_jsx","className","style","backgroundImage","bgImage","children","_jsxs","src","schoolLogo","alt","onSubmit","async","e","preventDefault","navigator","onLine","post","name","set","data","token","JSON","stringify","user","permissions","toast","success","position","autoClose","_error$response","_error$response$data","errorMessage","message","htmlFor","type","id","value","onChange","target","placeholder","disabled","Login"],"sourceRoot":""}